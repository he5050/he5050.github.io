(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{300:function(e,a,n){"use strict";n.r(a),function(e){n.d(a,"default",(function(){return u}));var t,c=n(103),s=(n(292),n(0),n(104)),p=["components"];function o(){return(o=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}function b(e,a){if(null==e)return{};var n,t,c=function(e,a){if(null==e)return{};var n,t,c={},s=Object.keys(e);for(t=0;t<s.length;t++)n=s[t],a.indexOf(n)>=0||(c[n]=e[n]);return c}(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)n=s[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}(t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&t(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var m,r,N=function(e){return function(a){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),Object(s.b)("div",a)}},l=N("Footer"),i={};function u(e){var a=e.components,n=b(e,p);return Object(s.b)("wrapper",o({},i,n,{components:a,mdxType:"MDXLayout"}),Object(s.b)("blockquote",null,Object(s.b)(l,{mdxType:"Footer"})),Object(s.b)("h1",{className:"__internal",id:"关于react"},"关于React",Object(s.b)("a",{parentName:"h1",href:"#%E5%85%B3%E4%BA%8Ereact","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("h2",{className:"__internal",id:"11-react是什么"},"1.1 React是什么",Object(s.b)("a",{parentName:"h2",href:"#11-react%E6%98%AF%E4%BB%80%E4%B9%88","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("inlineCode",{parentName:"li"},"React"),"是一个用于构建用户界面的 ",Object(s.b)("inlineCode",{parentName:"li"},"JavaScript")," 库。(",Object(s.b)("inlineCode",{parentName:"li"},"jquery"),"也是一个库，",Object(s.b)("inlineCode",{parentName:"li"},"angularjs"),"是一个框架)")),Object(s.b)("h2",{className:"__internal",id:"12-react能干什么"},"1.2 React能干什么",Object(s.b)("a",{parentName:"h2",href:"#12-react%E8%83%BD%E5%B9%B2%E4%BB%80%E4%B9%88","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul",className:"__internal"},"可以通过组件化的方法构建,构建快速响应的大型",Object(s.b)("inlineCode",{parentName:"li"},"web"),"应用")),Object(s.b)("h2",{className:"__internal",id:"13-react是如何干的"},"1.3 React是如何干的",Object(s.b)("a",{parentName:"h2",href:"#13-react%E6%98%AF%E5%A6%82%E4%BD%95%E5%B9%B2%E7%9A%84","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("h3",{className:"__internal",id:"131-声明式"},"1.3.1 声明式",Object(s.b)("a",{parentName:"h3",href:"#131-%E5%A3%B0%E6%98%8E%E5%BC%8F","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("strong",{parentName:"li"},"声明式"),"\n使用式编写用户界面，代码可行、方便调试。只需要告诉程序我想要的，其他的交给给",Object(s.b)("inlineCode",{parentName:"li"},"render"))),Object(s.b)("div",{className:"rcpress-highlight","data-language":"jsx"},Object(s.b)("pre",{parentName:"div",className:"language-jsx"},Object(s.b)("code",{parentName:"pre",className:"language-jsx"},"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"import")," React ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"from")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"react"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"import")," ReactDOM ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"from"),' "react',Object(s.b)("span",{parentName:"code",className:"token operator"},"-"),"dom\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," root ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," document",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"getElementById"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"root"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 声明式"),"\nReactDOM",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"render"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token tag"},Object(s.b)("span",{parentName:"span",className:"token tag"},Object(s.b)("span",{parentName:"span",className:"token punctuation"},"<"),"div")," ",Object(s.b)("span",{parentName:"span",className:"token attr-name"},"onClick"),Object(s.b)("span",{parentName:"span",className:"token script language-javascript"},Object(s.b)("span",{parentName:"span",className:"token script-punctuation punctuation"},"="),Object(s.b)("span",{parentName:"span",className:"token punctuation"},"{"),Object(s.b)("span",{parentName:"span",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"span",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"span",className:"token operator"},"=>"),Object(s.b)("span",{parentName:"span",className:"token punctuation"},"{"),"\n  console",Object(s.b)("span",{parentName:"span",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"span",className:"token function"},"log"),Object(s.b)("span",{parentName:"span",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"span",className:"token string"},'"声明式"'),Object(s.b)("span",{parentName:"span",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"span",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"span",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"span",className:"token punctuation"},"}")),Object(s.b)("span",{parentName:"span",className:"token punctuation"},">")),Object(s.b)("span",{parentName:"code",className:"token plain-text"},"声明式"),Object(s.b)("span",{parentName:"code",className:"token tag"},Object(s.b)("span",{parentName:"span",className:"token tag"},Object(s.b)("span",{parentName:"span",className:"token punctuation"},"</"),"div"),Object(s.b)("span",{parentName:"span",className:"token punctuation"},">")),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"root",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n"))),Object(s.b)("p",null,"astexplorer.net"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("strong",{parentName:"li"},"命令式"),"\n类似面向过程,一步一步执行")),Object(s.b)("div",{className:"rcpress-highlight","data-language":"jsx"},Object(s.b)("pre",{parentName:"div",className:"language-jsx"},Object(s.b)("code",{parentName:"pre",className:"language-jsx"},"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 命令式"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," divEle ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," document",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"createElement"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"div"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\ndivEle",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"innerHTML ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"命令式"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\ndivEle",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"addEventListener"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"click"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token operator"},"=>"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n   console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"命令式"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\nroot",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"appendChild"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"divEle",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n"))),Object(s.b)("h3",{className:"__internal",id:"132-组件化"},"1.3.2 组件化",Object(s.b)("a",{parentName:"h3",href:"#132-%E7%BB%84%E4%BB%B6%E5%8C%96","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("p",null,"组件化 把页面可以拆分为一个一个组件，方便视图的拆分和复用，还可以做到高内聚和低耦合"),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"可以使用",Object(s.b)("inlineCode",{parentName:"p"},"React"),"开发我们的",Object(s.b)("inlineCode",{parentName:"p"},"Web"),",",Object(s.b)("inlineCode",{parentName:"p"},"Native"),",",Object(s.b)("inlineCode",{parentName:"p"},"VR"),",命令行程序")),Object(s.b)("h3",{className:"__internal",id:"133-优缺点"},"1.3.3 优缺点",Object(s.b)("a",{parentName:"h3",href:"#133-%E4%BC%98%E7%BC%BA%E7%82%B9","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("p",{parentName:"li"},"优点"),Object(s.b)("ol",{parentName:"li"},Object(s.b)("li",{parentName:"ol",className:"__internal"},"开发团队与社区强大，有很多的组件、案例(有足够多的轮子)。"),Object(s.b)("li",{parentName:"ol",className:"__internal"},Object(s.b)("inlineCode",{parentName:"li"},"API"),"简洁。"),Object(s.b)("li",{parentName:"ol",className:"__internal"},"可以多处复用。"),Object(s.b)("li",{parentName:"ol",className:"__internal"},"声明式的写法,可以我们的代码结构清晰和整洁，可读性强。结构、样式和事件等能够实现高内聚底耦合，方便复用和组合。"),Object(s.b)("li",{parentName:"ol",className:"__internal"},"没有什么新的概念和语法，和以前写js基上是一至的。"))),Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("p",{parentName:"li"},"缺点"),Object(s.b)("ol",{parentName:"li"},Object(s.b)("li",{parentName:"ol",className:"__internal"},"官方没有成套的系统解决方案，社区的方案是百花齐放，从项目技术选型上来成本有点高。"),Object(s.b)("li",{parentName:"ol",className:"__internal"},"灵活性太高，对于写出高质量应用要求高,对于新手不友好有上手难度。")))),Object(s.b)("h3",{className:"__internal",id:"134-什么jsx"},"1.3.4 什么JSX",Object(s.b)("a",{parentName:"h3",href:"#134-%E4%BB%80%E4%B9%88jsx","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("div",{className:"rcpress-highlight","data-language":"jsx"},Object(s.b)("pre",{parentName:"div",className:"language-jsx"},Object(s.b)("code",{parentName:"pre",className:"language-jsx"},Object(s.b)("span",{parentName:"code",className:"token tag"},Object(s.b)("span",{parentName:"span",className:"token tag"},Object(s.b)("span",{parentName:"span",className:"token punctuation"},"<"),"h1"),"\n  ",Object(s.b)("span",{parentName:"span",className:"token attr-name"},"onClick"),Object(s.b)("span",{parentName:"span",className:"token script language-javascript"},Object(s.b)("span",{parentName:"span",className:"token script-punctuation punctuation"},"="),Object(s.b)("span",{parentName:"span",className:"token punctuation"},"{"),Object(s.b)("span",{parentName:"span",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"span",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"span",className:"token operator"},"=>"),Object(s.b)("span",{parentName:"span",className:"token punctuation"},"{"),"\n  console",Object(s.b)("span",{parentName:"span",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"span",className:"token function"},"log"),Object(s.b)("span",{parentName:"span",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"span",className:"token string"},'"!231"'),Object(s.b)("span",{parentName:"span",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"span",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"span",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"span",className:"token punctuation"},"}")),"\n  ",Object(s.b)("span",{parentName:"span",className:"token attr-name"},"style"),Object(s.b)("span",{parentName:"span",className:"token script language-javascript"},Object(s.b)("span",{parentName:"span",className:"token script-punctuation punctuation"},"="),Object(s.b)("span",{parentName:"span",className:"token punctuation"},"{"),Object(s.b)("span",{parentName:"span",className:"token punctuation"},"{"),"\n  width",Object(s.b)("span",{parentName:"span",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"span",className:"token number"},"100"),"\n  ",Object(s.b)("span",{parentName:"span",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"span",className:"token punctuation"},"}")),"\n  ",Object(s.b)("span",{parentName:"span",className:"token attr-name"},"id"),Object(s.b)("span",{parentName:"span",className:"token attr-value"},Object(s.b)("span",{parentName:"span",className:"token punctuation attr-equals"},"="),Object(s.b)("span",{parentName:"span",className:"token punctuation"},'"'),"test",Object(s.b)("span",{parentName:"span",className:"token punctuation"},'"')),"\n  ",Object(s.b)("span",{parentName:"span",className:"token attr-name"},"className"),Object(s.b)("span",{parentName:"span",className:"token attr-value"},Object(s.b)("span",{parentName:"span",className:"token punctuation attr-equals"},"="),Object(s.b)("span",{parentName:"span",className:"token punctuation"},'"'),"ok",Object(s.b)("span",{parentName:"span",className:"token punctuation"},'"')),"\n  ",Object(s.b)("span",{parentName:"span",className:"token punctuation"},">")),Object(s.b)("span",{parentName:"code",className:"token plain-text"},"\n  hello react\n"),Object(s.b)("span",{parentName:"code",className:"token tag"},Object(s.b)("span",{parentName:"span",className:"token tag"},Object(s.b)("span",{parentName:"span",className:"token punctuation"},"</"),"h1"),Object(s.b)("span",{parentName:"span",className:"token punctuation"},">"))))),Object(s.b)("hr",null),Object(s.b)("p",null,"在",Object(s.b)("a",{parentName:"p",href:"https://www.babeljs.cn/repl#?browsers=defaults%2C%20not%20ie%2011%2C%20not%20ie_mob%2011&build=&builtIns=false&corejs=3.6&spec=false&loose=false&code_lz=DwCwjABAUBEPYDsDCAbAlgYwNYF4DeAFAJQ4B8eMEGiAznCgKYB0KcA5gQEQCEATAMxhORANyUAvuOiwaAFwCejfBVgB3NABNZIAFwQwABgMSplTTk6yGcztKooAhjRoA5BwFsGFuFk6VSlCAMKKwQAE4MDhiyUMAA9OCkAJBAA&debug=false&forceAllTransforms=false&shippedProposals=false&circleciRepo=&evaluate=false&fileSize=false&timeTravel=false&sourceType=module&lineWrap=true&presets=env%2Creact%2Cstage-2&prettier=false&targets=&version=7.14.7&externalPlugins=",target:"_blank"},"babel"),"进行转义后的结果(",Object(s.b)("a",{parentName:"p",href:"https://esprima.org/demo/parse.html#",target:"_blank"},"AST"),"语法树转义，参考这里",Object(s.b)("a",{parentName:"p",href:"https://astexplorer.net/",target:"_blank"},"astexplorer"),")"),Object(s.b)("blockquote",null,Object(s.b)("h2",{parentName:"blockquote",className:"__internal",id:"tips-ast是用于描述语法的，而vnode是描述界面"},"tips: ",Object(s.b)("inlineCode",{parentName:"h2"},"ast"),"是用于描述语法的，而",Object(s.b)("inlineCode",{parentName:"h2"},"vnode"),"是描述界面",Object(s.b)("a",{parentName:"h2",href:"#tips-ast%E6%98%AF%E7%94%A8%E4%BA%8E%E6%8F%8F%E8%BF%B0%E8%AF%AD%E6%B3%95%E7%9A%84%EF%BC%8C%E8%80%8Cvnode%E6%98%AF%E6%8F%8F%E8%BF%B0%E7%95%8C%E9%9D%A2","aria-hidden":!0,className:"anchor"},"#"))),Object(s.b)("div",{className:"rcpress-highlight","data-language":"jsx"},Object(s.b)("pre",{parentName:"div",className:"language-jsx"},Object(s.b)("code",{parentName:"pre",className:"language-jsx"},Object(s.b)("span",{parentName:"code",className:"token string"},'"use strict"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"/*#__PURE__*/"),"\n",Object(s.b)("span",{parentName:"code",className:"token string"},'"use strict"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"/*#__PURE__*/"),"\nReact",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"createElement"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"h1"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"onClick"),Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=>")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"!231"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"\n  style",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    width",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"100"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"\n  id",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"test"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"\n  className",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"ok"'),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"hello react"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")))),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("inlineCode",{parentName:"li"},"JSX"),"是",Object(s.b)("inlineCode",{parentName:"li"},"javascript"),"的扩展，",Object(s.b)("inlineCode",{parentName:"li"},"JSX"),"可以很好的描述UI应该呈现出它应该有交互的本质形式."),Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("inlineCode",{parentName:"li"},"JSX"),"本质是 ",Object(s.b)("inlineCode",{parentName:"li"},"React.createElement"),"的语法糖")),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"补充",Object(s.b)("inlineCode",{parentName:"strong"},"React 17"),"以后创建组件的本质是引入一个",Object(s.b)("inlineCode",{parentName:"strong"},"jsx/runtime"),",其实就",Object(s.b)("inlineCode",{parentName:"strong"},"jsx/runtime"),"封装了",Object(s.b)("inlineCode",{parentName:"strong"},"React.createElement()"))),Object(s.b)("div",{className:"rcpress-highlight","data-language":"jsx"},Object(s.b)("pre",{parentName:"div",className:"language-jsx"},Object(s.b)("code",{parentName:"pre",className:"language-jsx"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," sourceCode ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token template-string"},Object(s.b)("span",{parentName:"span",className:"token template-punctuation string"},"`"),Object(s.b)("span",{parentName:"span",className:"token string"},'<h1 onClick={()=>{ console.log("!231"); }} style={{ width: 100 }} id="test" className="ok" > hello react </h1>'),Object(s.b)("span",{parentName:"span",className:"token template-punctuation string"},"`")),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," babel ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"require"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"@babel/core"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," result ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," babel",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"transform"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"sourceCode",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    plugins",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token string"},'"@babel/plugin-transform-react-jsx"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{")," runtime",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"classic"')," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// classic automatic"),"\n"))),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("strong",{parentName:"li"},"classic")," 模式下结果:")),Object(s.b)("div",{className:"rcpress-highlight","data-language":"jsx"},Object(s.b)("pre",{parentName:"div",className:"language-jsx"},Object(s.b)("code",{parentName:"pre",className:"language-jsx"},Object(s.b)("span",{parentName:"code",className:"token comment"},"/*#__PURE__*/"),"\nReact",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"createElement"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"h1"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"onClick"),Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=>")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"!231"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"\n  style",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    width",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"100"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"\n  id",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"test"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"\n  className",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"ok"'),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'" hello react "'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")))),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("strong",{parentName:"li"},"automatic")," 模式下结果:")),Object(s.b)("div",{className:"rcpress-highlight","data-language":"jsx"},Object(s.b)("pre",{parentName:"div",className:"language-jsx"},Object(s.b)("code",{parentName:"pre",className:"language-jsx"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"import")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{")," jsx ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"as")," _jsx ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"from")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"react/jsx-runtime"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"/*#__PURE__*/"),"\n",Object(s.b)("span",{parentName:"code",className:"token function"},"_jsx"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"h1"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"onClick"),Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=>")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"!231"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"\n  style",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    width",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"100"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"\n  id",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"test"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"\n  className",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"ok"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"\n  children",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'" hello react "'),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")))),Object(s.b)("h3",{className:"__internal",id:"135-关于virtualdom"},"1.3.5 关于virtualDOM",Object(s.b)("a",{parentName:"h3",href:"#135-%E5%85%B3%E4%BA%8Evirtualdom","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("div",{className:"rcpress-highlight","data-language":"jsx"},Object(s.b)("pre",{parentName:"div",className:"language-jsx"},Object(s.b)("code",{parentName:"pre",className:"language-jsx"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"import")," React ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"from")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"react"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," virtualDOMOne ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"\n    ",Object(s.b)("span",{parentName:"code",className:"token tag"},Object(s.b)("span",{parentName:"span",className:"token tag"},Object(s.b)("span",{parentName:"span",className:"token punctuation"},"<"),"div")," ",Object(s.b)("span",{parentName:"span",className:"token attr-name"},"id"),Object(s.b)("span",{parentName:"span",className:"token attr-value"},Object(s.b)("span",{parentName:"span",className:"token punctuation attr-equals"},"="),Object(s.b)("span",{parentName:"span",className:"token punctuation"},'"'),"A",Object(s.b)("span",{parentName:"span",className:"token punctuation"},'"'))," ",Object(s.b)("span",{parentName:"span",className:"token attr-name"},"key"),Object(s.b)("span",{parentName:"span",className:"token attr-value"},Object(s.b)("span",{parentName:"span",className:"token punctuation attr-equals"},"="),Object(s.b)("span",{parentName:"span",className:"token punctuation"},'"'),"A",Object(s.b)("span",{parentName:"span",className:"token punctuation"},'"')),Object(s.b)("span",{parentName:"span",className:"token punctuation"},">")),Object(s.b)("span",{parentName:"code",className:"token plain-text"},"\n        "),Object(s.b)("span",{parentName:"code",className:"token tag"},Object(s.b)("span",{parentName:"span",className:"token tag"},Object(s.b)("span",{parentName:"span",className:"token punctuation"},"<"),"div")," ",Object(s.b)("span",{parentName:"span",className:"token attr-name"},"id"),Object(s.b)("span",{parentName:"span",className:"token attr-value"},Object(s.b)("span",{parentName:"span",className:"token punctuation attr-equals"},"="),Object(s.b)("span",{parentName:"span",className:"token punctuation"},'"'),"B",Object(s.b)("span",{parentName:"span",className:"token punctuation"},'"'))," ",Object(s.b)("span",{parentName:"span",className:"token attr-name"},"key"),Object(s.b)("span",{parentName:"span",className:"token attr-value"},Object(s.b)("span",{parentName:"span",className:"token punctuation attr-equals"},"="),Object(s.b)("span",{parentName:"span",className:"token punctuation"},'"'),"B",Object(s.b)("span",{parentName:"span",className:"token punctuation"},'"')),Object(s.b)("span",{parentName:"span",className:"token punctuation"},">")),Object(s.b)("span",{parentName:"code",className:"token plain-text"},"\n            B\n        "),Object(s.b)("span",{parentName:"code",className:"token tag"},Object(s.b)("span",{parentName:"span",className:"token tag"},Object(s.b)("span",{parentName:"span",className:"token punctuation"},"</"),"div"),Object(s.b)("span",{parentName:"span",className:"token punctuation"},">")),Object(s.b)("span",{parentName:"code",className:"token plain-text"},"\n        "),Object(s.b)("span",{parentName:"code",className:"token tag"},Object(s.b)("span",{parentName:"span",className:"token tag"},Object(s.b)("span",{parentName:"span",className:"token punctuation"},"<"),"div")," ",Object(s.b)("span",{parentName:"span",className:"token attr-name"},"id"),Object(s.b)("span",{parentName:"span",className:"token attr-value"},Object(s.b)("span",{parentName:"span",className:"token punctuation attr-equals"},"="),Object(s.b)("span",{parentName:"span",className:"token punctuation"},'"'),"C",Object(s.b)("span",{parentName:"span",className:"token punctuation"},'"'))," ",Object(s.b)("span",{parentName:"span",className:"token attr-name"},"key"),Object(s.b)("span",{parentName:"span",className:"token attr-value"},Object(s.b)("span",{parentName:"span",className:"token punctuation attr-equals"},"="),Object(s.b)("span",{parentName:"span",className:"token punctuation"},'"'),"C",Object(s.b)("span",{parentName:"span",className:"token punctuation"},'"')),Object(s.b)("span",{parentName:"span",className:"token punctuation"},">")),Object(s.b)("span",{parentName:"code",className:"token plain-text"},"\n            C\n        "),Object(s.b)("span",{parentName:"code",className:"token tag"},Object(s.b)("span",{parentName:"span",className:"token tag"},Object(s.b)("span",{parentName:"span",className:"token punctuation"},"</"),"div"),Object(s.b)("span",{parentName:"span",className:"token punctuation"},">")),Object(s.b)("span",{parentName:"code",className:"token plain-text"},"\n    "),Object(s.b)("span",{parentName:"code",className:"token tag"},Object(s.b)("span",{parentName:"span",className:"token tag"},Object(s.b)("span",{parentName:"span",className:"token punctuation"},"</"),"div"),Object(s.b)("span",{parentName:"span",className:"token punctuation"},">")),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," virtualDOMTwo ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," React",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"createElement"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"\n    ",Object(s.b)("span",{parentName:"code",className:"token string"},'"div"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"\n    ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{")," id",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"A"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," key",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"A"')," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"\n    React",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"createElement"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"div"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{")," id",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"B"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," key",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"B"')," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"\n    React",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"createElement"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"div"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{")," id",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"C"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," key",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"C"')," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n"))),Object(s.b)("p",null,"打印结果:\n",Object(s.b)("img",{parentName:"p",src:"/images/react-dom-1.png",alt:"dom-打印结果"})),Object(s.b)("p",null,"简单的实现我们",Object(s.b)("inlineCode",{parentName:"p"},"React.createElement()")),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"tips: 为啥这里不使用箭头函数"),Object(s.b)("div",{parentName:"blockquote",className:"rcpress-highlight","data-language":"jsx"},Object(s.b)("pre",{parentName:"div",className:"language-jsx"},Object(s.b)("code",{parentName:"pre",className:"language-jsx"},Object(s.b)("span",{parentName:"code",className:"token comment"},"/**\n *\n * @param {*} type 元素类型\n * @param {*} config 配置对象\n * @param {*} children 子类\n */"))))),Object(s.b)("p",null,"// 保留属性\nconst RESERVED_PROPS = {\nkey: true,\nref: true,\n",Object(s.b)("strong",{parentName:"p"},"self: true,\n"),'source: true\n};\nconst sbl = Symbol("1232"); // 特定的值 可以react的源码中查看\nexport function createElement(type, config, children) {\nconst props = {};\n// key用来标识每个固定元素\nlet key = null;\nif (config !== null) {\nkey = config.key;\n}'),Object(s.b)("div",{className:"rcpress-highlight","data-language":"text"},Object(s.b)("pre",{parentName:"div",className:"language-text"},Object(s.b)("code",{parentName:"pre",className:"language-text"},"for (let propsName in config) {\n    if (!RESERVED_PROPS.hasOwnProperty(propsName)) {\n        props[propsName] = config[propsName];\n    }\n}\n/*\n * children\n * 有可能是一个元素，也有可能是一个字符串，也有可能是一个数字，也有可能是Null\n * 也有可能只有一个儿子，也有可能没有儿子或是多个儿子\n * props.children = null|string|number|React元素 [null|string|number|React元素 ]\n * ReactNode 与 ReactElement\n * ReactNode 标识一个可以渲染的值 null|string|number|React // 相当于类型\n */\nconst childrenLength = arguments.length - 2;\n\nif (childrenLength === 1) {\n    props.children = children;\n} else if (childrenLength > 1) {\n    const childArray = Array(childrenLength);\n    for (let i = 0; i < childrenLength; i++) {\n        childArray[i] = arguments[i + 2];\n    }\n    props.children = childArray;\n}\n\n// React.createElement方法返回是一个普通的js对象，用于描述我们的元素，这里可以简单理解这就是我们的虚拟DOM,\n// 从这里看出虚拟DOM是可以跨平台的\nconst element = {\n    $$typeof: sbl,\n    type,\n    key,\n    props\n};\n\nreturn element;"))),Object(s.b)("p",null,"}"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"text"},Object(s.b)("pre",{parentName:"div",className:"language-text"},Object(s.b)("code",{parentName:"pre",className:"language-text"},"总结一下:\n+ 避免操作真实的`DOM`，又麻烦又容易出错\n+ 内容经过了`XSS`处理,可以防范`xss`攻击\n+ 比较容易实现跨平台\n+ 更新的时候可以实现差异化更新,减少了`DOM`的操作\n+ 因为虚拟`DOM`是纯`JS`对象，所以会需要消耗额外的内存\n+ 首次渲染不会很快(*怎么处理首次渲染白屏的问题*)\n"))))}u.isMDXComponent=!0,u=Object(c.hot)(e)(u),(m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(m.register(N,"makeShortcode","E:\\h-project\\my-blog\\docs\\notes\\README.md"),m.register(l,"Footer","E:\\h-project\\my-blog\\docs\\notes\\README.md"),m.register(i,"layoutProps","E:\\h-project\\my-blog\\docs\\notes\\README.md"),m.register("wrapper","MDXLayout","E:\\h-project\\my-blog\\docs\\notes\\README.md"),m.register(u,"MDXContent","E:\\h-project\\my-blog\\docs\\notes\\README.md")),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&r(e)}.call(this,n(5)(e))}}]);