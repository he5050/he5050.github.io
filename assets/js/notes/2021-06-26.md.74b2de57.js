(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{320:function(e,a,t){"use strict";t.r(a),function(e){t.d(a,"default",(function(){return d}));var n,c=t(108),s=(t(306),t(0),t(109)),o=["components"];function p(){return(p=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function b(e,a){if(null==e)return{};var t,n,c=function(e,a){if(null==e)return{};var t,n,c={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||(c[t]=e[t]);return c}(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(c[t]=e[t])}return c}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var m,N,r=function(e){return function(a){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),Object(s.b)("div",a)}},l=r("Footer"),u={};function d(e){var a=e.components,t=b(e,o);return Object(s.b)("wrapper",p({},u,t,{components:a,mdxType:"MDXLayout"}),Object(s.b)("blockquote",null,Object(s.b)(l,{mdxType:"Footer"})),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"预览office\n",Object(s.b)("inlineCode",{parentName:"p"},"http://view.officeapps.live.com/op/view.aspx?src=${item.url}"))),Object(s.b)("h1",{className:"__internal",id:"3关于es6"},"3.关于ES6",Object(s.b)("a",{parentName:"h1",href:"#3%E5%85%B3%E4%BA%8Ees6","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("h1",{className:"__internal",id:"set与weakset"},"Set与WeakSet",Object(s.b)("a",{parentName:"h1",href:"#set%E4%B8%8Eweakset","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("h2",{className:"__internal",id:"1-前言"},"1. 前言",Object(s.b)("a",{parentName:"h2",href:"#1-%E5%89%8D%E8%A8%80","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("p",null,"在开发过程中，我们会经常使用到数组Array这种引用类型的数据结构，并十分清楚数组是种有序的集合，并且每个元素都可以使用数字下标的形式获取。但是在一些业务场景中，我们并不需要集合维护一个有序的状态，甚至有些场景需要无序集合，因此ES6里加入了无序集合Set和其的Weak版本WeakSet。"),Object(s.b)("p",null,"其实无序集合的概念十分容易理解，我们可以认为是没有排序概念的数组，并且具有元素不可重复的特性。"),Object(s.b)("p",null,"从以下几个方面介绍:"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("p",{parentName:"li"},"Set代码示例")),Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("p",{parentName:"li"},"Set和Array的区别")),Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("p",{parentName:"li"},"Set常用方法")),Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("p",{parentName:"li"},"WeakSet介绍"))),Object(s.b)("h2",{className:"__internal",id:"2-set代码示例"},"2. Set代码示例",Object(s.b)("a",{parentName:"h2",href:"#2-set%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("p",null,"Set需要使用新语法new Set()声明，代码如下："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," set ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Set"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"Hello!!!"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nset",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"add"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token number"},"12"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//add 12"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"set",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"has"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"!"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//check if value exists"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"set",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"size",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nset",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"delete"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token number"},"12"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//delete 12"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token operator"},"..."),"set",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nset",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"clear"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//delete all values"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"//output"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"//true"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"//6"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"//H e l o !")))),Object(s.b)("p",null,"这段代码我们向Set集合里添加了一个字符串和数字，字符串在Set集合里会被拆分成字符进行存储，由于Set集合去重的特点，l和!重复将会被去重（ Set { 'h', 'e', 'l', 'o' ,'!'}），使用add方法添加了12到Set集合里，因此集合的大小是6。"),Object(s.b)("h2",{className:"__internal",id:"3-set与array的区别"},"3. Set与Array的区别",Object(s.b)("a",{parentName:"h2",href:"#3-set%E4%B8%8Earray%E7%9A%84%E5%8C%BA%E5%88%AB","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("p",null,"以下表格为Array和Set的区别"),Object(s.b)("table",null,Object(s.b)("thead",{parentName:"table"},Object(s.b)("tr",{parentName:"thead"},Object(s.b)("th",{parentName:"tr",align:null},"对比项"),Object(s.b)("th",{parentName:"tr",align:null},"Array"),Object(s.b)("th",{parentName:"tr",align:null},"Set"))),Object(s.b)("tbody",{parentName:"table"},Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"元素序列"),Object(s.b)("td",{parentName:"tr",align:null},"有序"),Object(s.b)("td",{parentName:"tr",align:null},"无序")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"元素可重复性"),Object(s.b)("td",{parentName:"tr",align:null},"元素可重复"),Object(s.b)("td",{parentName:"tr",align:null},"元素不可重复")))),Object(s.b)("h2",{className:"__internal",id:"4-set常用方法"},"4. Set常用方法",Object(s.b)("a",{parentName:"h2",href:"#4-set%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("p",null,"以下表格罗列了Set相关的方法"),Object(s.b)("table",null,Object(s.b)("thead",{parentName:"table"},Object(s.b)("tr",{parentName:"thead"},Object(s.b)("th",{parentName:"tr",align:null},"方法"),Object(s.b)("th",{parentName:"tr",align:null},"介绍"))),Object(s.b)("tbody",{parentName:"table"},Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"set.add(value)"),Object(s.b)("td",{parentName:"tr",align:null},"添加元素到集合内")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"set.delete(value)"),Object(s.b)("td",{parentName:"tr",align:null},"删除元素的指定元素")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"set.clear()"),Object(s.b)("td",{parentName:"tr",align:null},"清空集合内元素")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"set.forEach(callbackFn,","[,context]",")"),Object(s.b)("td",{parentName:"tr",align:null},"遍历集合内所有元素，并作为CallbackFn的参数进行调用")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"set.has(value)"),Object(s.b)("td",{parentName:"tr",align:null},"检查集合内是否含有某元素")))),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"添加删除清空")),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," set",Object(s.b)("span",{parentName:"code",className:"token operator"},"="),Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Set"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nset\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"add"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token number"},"1"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"add"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token number"},"2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"add"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token number"},"3"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"add"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token number"},"3"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),Object(s.b)("span",{parentName:"code",className:"token comment"},"//不起作用，因为3已经在集合中"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"set",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),Object(s.b)("span",{parentName:"code",className:"token comment"},"//output Set { 1, 2, 3 }"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"//删除元素"),"\nset",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"delete"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token number"},"2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"set",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),Object(s.b)("span",{parentName:"code",className:"token comment"},"//output Set {1,3}"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"//清空集合"),"\nset",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"clear"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"set",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//output Set{}")))),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"检查元素")),Object(s.b)("p",null,"因为Set集合里没有排序的概念，因此我们无法使用Array的IndexOf的方法判断是否大于0来检验是否含有某元素，ES6里使用了更简洁、更易懂的方法来检验是否含有某元素。"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," set",Object(s.b)("span",{parentName:"code",className:"token operator"},"="),Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Set"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token number"},"1"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token number"},"2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token number"},"3"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token number"},"4"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nset",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"has"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token number"},"2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//output true;"),"\nset",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"has"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token number"},"5"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//output false;")))),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"遍历元素")),Object(s.b)("p",null,"集合对象自身定义了forEach方法，跟数组类型的foreach一样,示例代码如下："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," set",Object(s.b)("span",{parentName:"code",className:"token operator"},"="),Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Set"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token number"},"1"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token number"},"2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token number"},"3"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token number"},"4"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nset",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"forEach"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"item"),Object(s.b)("span",{parentName:"code",className:"token operator"},"=>"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"item",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"//output"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"//1"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"//2"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"//3"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"//4")))),Object(s.b)("h2",{className:"__internal",id:"5weakset"},"5.WeakSet",Object(s.b)("a",{parentName:"h2",href:"#5weakset","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("p",null,"JavaScript垃圾回收是一种内存管理技术。在这种技术中，不再被引用的对象会被自动删除，而与其相关的资源也会被一同回收。Set中对象的引用都是强类型化的，并不会允许垃圾回收。这样一来，如果Set中引用了不再需要的大型对象，如已经从DOM树中删除的DOM元素，那么其回收代价是昂贵的。"),Object(s.b)("p",null,'为了解决这个问题，ES6还引入了WeakSet的弱集合。这些集合之所以是"弱的"，是因为它们允许从内存中清除不再需要的被这些集合所引用的对象。'),Object(s.b)("p",null,"首先让我们了解下WeakSet与Set的不同，以下三点是WeakSet与Set不一样的地方："),Object(s.b)("ol",null,Object(s.b)("li",{parentName:"ol",className:"__internal"},Object(s.b)("p",{parentName:"li"},"Set可以存储值类型和对象引用类型，而WeakSet只能存储对象引用类型，否则会抛出TypeError。")),Object(s.b)("li",{parentName:"ol",className:"__internal"},Object(s.b)("p",{parentName:"li"},"WeakSet不能包含无引用的对象，否则会被自动清除出集合（垃圾回收机制）。")),Object(s.b)("li",{parentName:"ol",className:"__internal"},Object(s.b)("p",{parentName:"li"},"WeakSet对象是不可枚举的，也就是说无法获取大小，也无法获取其中包含的元素。"))),Object(s.b)("p",null,"如下段的代码验证了上述特性："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," weakset ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"WeakSet"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"function"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," a ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  weakset",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"add"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token number"},"1"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//TypeError: Invalid value used in weak set"),"\n  weakset",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"add"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"a",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//here 'a' is garbage collected from weakset"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"weakset",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"size",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},'//output "undefined"'),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token operator"},"..."),"weakset",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//Exception is thrown"),"\nweakset",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"clear"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//Exception, no such function"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," weakset",Object(s.b)("span",{parentName:"code",className:"token operator"},"="),Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"WeakSet"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," foo",Object(s.b)("span",{parentName:"code",className:"token operator"},"="),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"bar",Object(s.b)("span",{parentName:"code",className:"token operator"},":"),Object(s.b)("span",{parentName:"code",className:"token number"},"1"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nweakset",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"add"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"foo",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"weakset",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"has"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"foo",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//output true"),"\nfoo",Object(s.b)("span",{parentName:"code",className:"token operator"},"="),Object(s.b)("span",{parentName:"code",className:"token keyword"},"null"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"weakset",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"has"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"foo",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//output false")))),Object(s.b)("h1",{className:"__internal",id:"map与weakmap"},"Map与WeakMap",Object(s.b)("a",{parentName:"h1",href:"#map%E4%B8%8Eweakmap","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("h2",{className:"__internal",id:"1-前言-1"},"1. 前言",Object(s.b)("a",{parentName:"h2",href:"#1-%E5%89%8D%E8%A8%80-1","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("p",null,"ES6里除了增加了Set（集合）类型外,ES6引入的新类型——Map(映射类型)和其对应的弱类型WeakMap。映射类型在计算机科学中定义属于关联数组，而关联数组的定义是若干键值对(Key/Value Pair)组成的集合,其中每个Key值都只能出现一次。"),Object(s.b)("p",null,"从以下几个方面介绍:"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("p",{parentName:"li"},"Map代码示例")),Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("p",{parentName:"li"},"Map常用方法示例")),Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("p",{parentName:"li"},"Map与Object的区别")),Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("p",{parentName:"li"},"weakMap介绍"))),Object(s.b)("h2",{className:"__internal",id:"2-map代码示例"},"2. Map代码示例",Object(s.b)("a",{parentName:"h2",href:"#2-map%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("p",null,"Map的键和值可以是任何数据类型，键值对按照插入顺序排列，下段代码演示了Map的一些用法："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," map ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Map"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," o ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"n",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"1"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nmap",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"set"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"o",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"A"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//add"),"\nmap",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"set"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"2"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"9"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"map",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"has"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"2"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//check if key exists"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"map",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"get"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"o",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//retrieve value associated with key"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token operator"},"..."),"map",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"map",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nmap",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"delete"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"2"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//delete key and associated value"),"\nmap",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"clear"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//delete everything"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"//create a map from iterable object"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," map_1 ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Map"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token number"},"1"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token number"},"4"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"5"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"map_1",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"size",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//number of keys")))),Object(s.b)("p",null,"上述代码将会输出："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"sh"},Object(s.b)("pre",{parentName:"div",className:"language-sh"},Object(s.b)("code",{parentName:"pre",className:"language-sh"},"true\nA\n[ { n: 1 }, 'A' ] [ '2', 9 ]\nMap { { n: 1 } => 'A', '2' => 9 }\n2"))),Object(s.b)("p",null,"从上述代码中，我们可以看出使用new Map()语法进行声明，Map键的类型可以使用任意对象作为键（字符串，object类型），我们还可以直接以二维数组键值对的形传入到构建函数中，第一项为键，后一项为值。"),Object(s.b)("p",null,"Map中如果插入重复的键，会怎么样？如下段代码所示："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," map",Object(s.b)("span",{parentName:"code",className:"token operator"},"="),Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Map"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token string"},"'foo'"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token number"},"1"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token string"},"'foo'"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token number"},"2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"map",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"map",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"get"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},"'foo'"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")))),Object(s.b)("p",null,"上述代码将会输出："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"sh"},Object(s.b)("pre",{parentName:"div",className:"language-sh"},Object(s.b)("code",{parentName:"pre",className:"language-sh"},"Map { 'foo' => 2 }\n2"))),Object(s.b)("p",null,"上述代码我们可以看出，如果存在相同的键，则会按照FIFO（First in First Out,先进先出）原则，后面的键值信息会覆盖前面的键值信息。"),Object(s.b)("h2",{className:"__internal",id:"3-map常用方法示例"},"3. Map常用方法示例",Object(s.b)("a",{parentName:"h2",href:"#3-map%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%E7%A4%BA%E4%BE%8B","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("p",null,"以下表格罗列了Map相关的常用操作方法："),Object(s.b)("table",null,Object(s.b)("thead",{parentName:"table"},Object(s.b)("tr",{parentName:"thead"},Object(s.b)("th",{parentName:"tr",align:null},"操作方法"),Object(s.b)("th",{parentName:"tr",align:null},"内容描述"))),Object(s.b)("tbody",{parentName:"table"},Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"map.set(key,value)"),Object(s.b)("td",{parentName:"tr",align:null},"添加键值对到映射中")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"map.get(key)"),Object(s.b)("td",{parentName:"tr",align:null},"获取映射中某一个键的对应值")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"map.delete(key)"),Object(s.b)("td",{parentName:"tr",align:null},"将某一键值对移除映射")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"map.clear()"),Object(s.b)("td",{parentName:"tr",align:null},"清空映射中所有键值对")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"map.entries()"),Object(s.b)("td",{parentName:"tr",align:null},"返回一个以二元数组（键值对）作为元素的数组")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"map.has(key)"),Object(s.b)("td",{parentName:"tr",align:null},"检查映射中是否包含某一键值对")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"map.keys()"),Object(s.b)("td",{parentName:"tr",align:null},"返回一个当前映射中所有键作为元素的可迭代对象")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"map.values()"),Object(s.b)("td",{parentName:"tr",align:null},"返回一个当前映射中所有值作为元素的可迭代对象")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"map.size"),Object(s.b)("td",{parentName:"tr",align:null},"映射中键值对的数量")))),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"增删键值对与清空MAP")),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," user",Object(s.b)("span",{parentName:"code",className:"token operator"},"="),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"name",Object(s.b)("span",{parentName:"code",className:"token operator"},":"),Object(s.b)("span",{parentName:"code",className:"token string"},'"Aaron"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"id",Object(s.b)("span",{parentName:"code",className:"token operator"},":"),Object(s.b)("span",{parentName:"code",className:"token number"},"1234"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," userHobbyMap",Object(s.b)("span",{parentName:"code",className:"token operator"},"="),Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Map"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nuserHobbyMap",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"set"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"user",Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token string"},"'Ice fishing'"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token string"},"'Family Outting'"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),Object(s.b)("span",{parentName:"code",className:"token comment"},"//添加键值对"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"userHobbyMap",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nuserHobbyMap",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"delete"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"user",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),Object(s.b)("span",{parentName:"code",className:"token comment"},"//删除键值对"),"\nuserHobbyMap",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"clear"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//清空键值对"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"userHobbyMap",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")))),Object(s.b)("p",null,"上述代码将会输出："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"sh"},Object(s.b)("pre",{parentName:"div",className:"language-sh"},Object(s.b)("code",{parentName:"pre",className:"language-sh"},"Map { { name: 'Aaron', id: 1234 } => [ 'Ice fishing', 'Family Outting' ] }\nMap {}"))),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"获取键值对")),Object(s.b)("p",null,"与Set集合对象不一样，集合对象的元素没有元素位置的标识，故没有办法获取集合某元素，但是映射对象由键值对组成，所以可以利用键来获取对应的值。"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," map",Object(s.b)("span",{parentName:"code",className:"token operator"},"="),Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Map"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nmap",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"set"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},"'foo'"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token string"},"'bar'"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"map",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"get"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},"'foo'"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//output bar")))),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"检查映射对象中是否存在某键")),Object(s.b)("p",null,"与Set集合一样，Map映射也可以使用has(键)的方法来检查是否包含某键。"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," map",Object(s.b)("span",{parentName:"code",className:"token operator"},"="),Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Map"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token string"},"'foo'"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token number"},"1"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"map",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"has"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},"'foo'"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),Object(s.b)("span",{parentName:"code",className:"token comment"},"//output true"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"map",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"has"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},"'bar'"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),Object(s.b)("span",{parentName:"code",className:"token comment"},"//output false")))),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"遍历映射中的键值对")),Object(s.b)("p",null,"映射对象在设计上同样也是一种可迭代的对象，可以通过for","-","of循环对其遍历，同时也可以使用foreach进行遍历。"),Object(s.b)("p",null,"映射对象中带有entries()方法，用于返回包含所有键值对的可迭代的二元数组对象，而for","-","of和foreach便是先利用entries()方法先将映射对象转换成一个类数组对象，然年再进行迭代。"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," map",Object(s.b)("span",{parentName:"code",className:"token operator"},"="),Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Map"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token string"},"'foo'"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token number"},"1"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token string"},"'bar'"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token number"},"2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"Array",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"from"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"map",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"entries"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"//output"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"//[ [ 'foo', 1 ], [ 'bar', 2 ] ]"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"for"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),"key",Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"value",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"of")," map",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token template-string"},Object(s.b)("span",{parentName:"span",className:"token template-punctuation string"},"`"),Object(s.b)("span",{parentName:"span",className:"token interpolation"},Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"${"),"key",Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"}")),Object(s.b)("span",{parentName:"span",className:"token string"},":"),Object(s.b)("span",{parentName:"span",className:"token interpolation"},Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"${"),"value",Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"}")),Object(s.b)("span",{parentName:"span",className:"token template-punctuation string"},"`")),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"//output"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"//foo:1"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"//bar:2"),"\nmap",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"forEach"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"value",Object(s.b)("span",{parentName:"span",className:"token punctuation"},","),"key",Object(s.b)("span",{parentName:"span",className:"token punctuation"},","),"map"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token operator"},"=>"),"\n  console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token template-string"},Object(s.b)("span",{parentName:"span",className:"token template-punctuation string"},"`"),Object(s.b)("span",{parentName:"span",className:"token interpolation"},Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"${"),"key",Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"}")),Object(s.b)("span",{parentName:"span",className:"token string"},":"),Object(s.b)("span",{parentName:"span",className:"token interpolation"},Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"${"),"value",Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"}")),Object(s.b)("span",{parentName:"span",className:"token template-punctuation string"},"`")),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"//output"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"//foo:1"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"//bar:2")))),Object(s.b)("h2",{className:"__internal",id:"4-map与object的区别"},"4. Map与Object的区别",Object(s.b)("a",{parentName:"h2",href:"#4-map%E4%B8%8Eobject%E7%9A%84%E5%8C%BA%E5%88%AB","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("p",null,"说了这么多映射对象的方法，Map和Object对象有哪些区别呢？"),Object(s.b)("table",null,Object(s.b)("thead",{parentName:"table"},Object(s.b)("tr",{parentName:"thead"},Object(s.b)("th",{parentName:"tr",align:null},"对比项"),Object(s.b)("th",{parentName:"tr",align:null},"映射对象Map"),Object(s.b)("th",{parentName:"tr",align:null},"Object对象"))),Object(s.b)("tbody",{parentName:"table"},Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"存储键值对"),Object(s.b)("td",{parentName:"tr",align:null},"√"),Object(s.b)("td",{parentName:"tr",align:null},"√")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"遍历所有的键值对"),Object(s.b)("td",{parentName:"tr",align:null},"√"),Object(s.b)("td",{parentName:"tr",align:null},"√")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"检查是否包含指定的键值对"),Object(s.b)("td",{parentName:"tr",align:null},"√"),Object(s.b)("td",{parentName:"tr",align:null},"√")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"使用字符串作为键"),Object(s.b)("td",{parentName:"tr",align:null},"√"),Object(s.b)("td",{parentName:"tr",align:null},"√")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"使用Symbol作为键"),Object(s.b)("td",{parentName:"tr",align:null},"√"),Object(s.b)("td",{parentName:"tr",align:null},"√")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"使用任意对象作为键"),Object(s.b)("td",{parentName:"tr",align:null},"√"),Object(s.b)("td",{parentName:"tr",align:null})),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"可以很方便的得知键值对的数量"),Object(s.b)("td",{parentName:"tr",align:null},"√"),Object(s.b)("td",{parentName:"tr",align:null})))),Object(s.b)("p",null,"从中我们可以看出Map对象可以使用任何对象作为键，这就解决了我们实际应用中一个很大的痛点，比如现在有一个DOM对象作为键时，Object就不是那么好用了。"),Object(s.b)("h2",{className:"__internal",id:"5-weakmap"},"5. WeakMap",Object(s.b)("a",{parentName:"h2",href:"#5-weakmap","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("p",null,"与集合类型（Set）一样，映射类型也有一个Weak版本的WeakMap。WeakMap和WeakSet很相似，只不过WeakMap的键会检查变量的引用，只要其中任意一个引用被释放，该键值对就会被删除。"),Object(s.b)("p",null,"以下三点是Map和WeakMap的主要区别："),Object(s.b)("ol",null,Object(s.b)("li",{parentName:"ol",className:"__internal"},Object(s.b)("p",{parentName:"li"},"Map对象的键可以是任何类型，但WeakMap对象中的键只能是对象引用")),Object(s.b)("li",{parentName:"ol",className:"__internal"},Object(s.b)("p",{parentName:"li"},"WeakMap不能包含无引用的对象，否则会被自动清除出集合（垃圾回收机制）。")),Object(s.b)("li",{parentName:"ol",className:"__internal"},Object(s.b)("p",{parentName:"li"},"WeakSet对象是不可枚举的，无法获取大小。"))),Object(s.b)("p",null,"下段代码示例验证了WeakMap的以上特性："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," weakmap ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"WeakMap"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"function"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," o ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"n",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"1"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  weakmap",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"set"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"o",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"A"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// here 'o' key is garbage collected"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," s ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"m",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"1"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nweakmap",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"set"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"s",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"B"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"weakmap",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"get"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"s",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token operator"},"..."),"weakmap",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// exception thrown"),"\nweakmap",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"delete"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"s",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nweakmap",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"clear"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// Exception, no such function"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," weakmap_1 ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"WeakMap"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"5"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//this works"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"weakmap_1",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"size",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//undefined”"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," weakmap",Object(s.b)("span",{parentName:"code",className:"token operator"},"="),Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"WeakMap"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," keyObject",Object(s.b)("span",{parentName:"code",className:"token operator"},"="),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"id",Object(s.b)("span",{parentName:"code",className:"token operator"},":"),Object(s.b)("span",{parentName:"code",className:"token number"},"1"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," valObject",Object(s.b)("span",{parentName:"code",className:"token operator"},"="),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"score",Object(s.b)("span",{parentName:"code",className:"token operator"},":"),Object(s.b)("span",{parentName:"code",className:"token number"},"100"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nweakmap",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"set"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"keyObject",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," valObject",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"weakmap",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"get"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"keyObject",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"//output { score: 100 }"),"\nkeyObject",Object(s.b)("span",{parentName:"code",className:"token operator"},"="),Object(s.b)("span",{parentName:"code",className:"token keyword"},"null"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"weakmap",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"has"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"keyObject",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"//output false")))),Object(s.b)("h1",{className:"__internal",id:"箭头函数"},"箭头函数",Object(s.b)("a",{parentName:"h1",href:"#%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("h2",{className:"__internal",id:"1-前言-2"},"1. 前言",Object(s.b)("a",{parentName:"h2",href:"#1-%E5%89%8D%E8%A8%80-2","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("p",null,"ES6中，除了let和const新特性，箭头函数是使用频率最高的新特性了。箭头函数顾名思义是使用箭头（=>）定义的函数，属于匿名函数一类。"),Object(s.b)("p",null,"将会从以下几个方面，介绍箭头函数："),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("p",{parentName:"li"},"使用语法")),Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("p",{parentName:"li"},"书写注意事项")),Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("p",{parentName:"li"},"使用举例")),Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("p",{parentName:"li"},"this穿透")),Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("p",{parentName:"li"},"箭头函数和传统函数的区别"))),Object(s.b)("h2",{className:"__internal",id:"2-基本介绍"},"2. 基本介绍",Object(s.b)("a",{parentName:"h2",href:"#2-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"使用语法")),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"1、单一参数的单行箭头函数")),Object(s.b)("p",null,"如下段代码所示，很简单："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"fn"),Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token parameter"},"foo")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=>"),Object(s.b)("span",{parentName:"code",className:"token template-string"},Object(s.b)("span",{parentName:"span",className:"token template-punctuation string"},"`"),Object(s.b)("span",{parentName:"span",className:"token interpolation"},Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"${"),"foo",Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"}")),Object(s.b)("span",{parentName:"span",className:"token string"}," world"),Object(s.b)("span",{parentName:"span",className:"token template-punctuation string"},"`")),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")))),Object(s.b)("p",null,"这是箭头函数最简洁的形式，常用于用作简单的处理函数，如过滤。如下段代码所示："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"text"},Object(s.b)("pre",{parentName:"div",className:"language-text"},Object(s.b)("code",{parentName:"pre",className:"language-text"},"let array=['a','bc','def','ghij'];\narray=array.filter(item=>item.length>=2);"))),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"2、多参数的单行箭头函数")),Object(s.b)("p",null,"语法也很简单，如下段代码所示："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"fn"),Object(s.b)("span",{parentName:"code",className:"token operator"},"="),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"foo",Object(s.b)("span",{parentName:"span",className:"token punctuation"},","),"bar"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=>")," foo",Object(s.b)("span",{parentName:"code",className:"token operator"},"+"),"bar",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")))),Object(s.b)("p",null,"在实际开发中，函数的参数不会只有一个，在箭头函数中，多参数的语法跟普通函数一样，用括号包裹参数项。我们经常处理函数，如排序，示例代码如下："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," array",Object(s.b)("span",{parentName:"code",className:"token operator"},"="),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token string"},"'a'"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token string"},"'bc'"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token string"},"'def'"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token string"},"'ghij'"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\narray",Object(s.b)("span",{parentName:"code",className:"token operator"},"="),"array",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"sort"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"a",Object(s.b)("span",{parentName:"span",className:"token punctuation"},","),"b"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=>")," a",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"length ",Object(s.b)("span",{parentName:"code",className:"token operator"},"<")," b",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"length",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")))),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"3、多行箭头函数")),Object(s.b)("p",null,"单一参数，如下段代码所示："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token parameter"},"foo")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=>")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"return")," ",Object(s.b)("span",{parentName:"code",className:"token template-string"},Object(s.b)("span",{parentName:"span",className:"token template-punctuation string"},"`"),Object(s.b)("span",{parentName:"span",className:"token interpolation"},Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"${"),"foo",Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"}")),Object(s.b)("span",{parentName:"span",className:"token string"}," world"),Object(s.b)("span",{parentName:"span",className:"token template-punctuation string"},"`")),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}")))),Object(s.b)("p",null,"多参数，如下段代码所示："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"foo",Object(s.b)("span",{parentName:"span",className:"token punctuation"},","),"bar"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=>")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"return")," foo",Object(s.b)("span",{parentName:"code",className:"token operator"},"+"),"bar",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}")))),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"4、无参数箭头函数")),Object(s.b)("p",null,"如果一个箭头函数无参数传入，则需要用一对空的括号来表示空的参数列表。"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"greet")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=>")," ",Object(s.b)("span",{parentName:"code",className:"token string"},"'Hello World'"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")))),Object(s.b)("p",null,"以上都是被支持的箭头函数的表达方式，其最大的好处就是简单明了，省略了function关键字，而使用 => 代替。相对于传统的function函数，箭头函数在简单的函数使用中更为简洁直观。"),Object(s.b)("h2",{className:"__internal",id:"3-注意事项"},"3. 注意事项",Object(s.b)("a",{parentName:"h2",href:"#3-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"1、使用单行箭头函数时，应避免换行")),Object(s.b)("p",null,"错误的用法，如下段代码所示："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"fn"),Object(s.b)("span",{parentName:"code",className:"token operator"},"="),Object(s.b)("span",{parentName:"code",className:"token parameter"},"x"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=>")," x",Object(s.b)("span",{parentName:"code",className:"token operator"},"*"),Object(s.b)("span",{parentName:"code",className:"token number"},"2")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),Object(s.b)("span",{parentName:"code",className:"token comment"},"//SyntaxError")))),Object(s.b)("p",null,"正确的写法，如下："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"text"},Object(s.b)("pre",{parentName:"div",className:"language-text"},Object(s.b)("code",{parentName:"pre",className:"language-text"},"const fn= x => x*2;//ok"))),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"2、参数列别的右括弧、箭头应在一行")),Object(s.b)("p",null,"错误的用法，如下段代码所示："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," fn ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"x",Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"y",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//SyntaxError"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=>")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"return")," x",Object(s.b)("span",{parentName:"code",className:"token operator"},"*"),"y",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")))),Object(s.b)("p",null,"下段代码书写是正确的："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"fn"),Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"x",Object(s.b)("span",{parentName:"span",className:"token punctuation"},","),"y"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=>")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//ok"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"return")," x",Object(s.b)("span",{parentName:"code",className:"token operator"},"*"),"y\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"fn"),Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"x",Object(s.b)("span",{parentName:"span",className:"token punctuation"},","),"y"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=>")," x",Object(s.b)("span",{parentName:"code",className:"token operator"},"*"),"y ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//ok")))),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"3、单行箭头函数返回只能包含一条语句")),Object(s.b)("p",null,"错误的书写，如下段代码所示："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"fn1"),Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token parameter"},"x")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=>")," x",Object(s.b)("span",{parentName:"code",className:"token operator"},"="),"x",Object(s.b)("span",{parentName:"code",className:"token operator"},"*"),Object(s.b)("span",{parentName:"code",className:"token number"},"2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"return")," x",Object(s.b)("span",{parentName:"code",className:"token operator"},"+"),Object(s.b)("span",{parentName:"code",className:"token number"},"2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//SyntaxError")))),Object(s.b)("p",null,"正确的书写，如下段代码所示："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"fn2"),Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token parameter"},"x")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=>")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  x",Object(s.b)("span",{parentName:"code",className:"token operator"},"="),"x",Object(s.b)("span",{parentName:"code",className:"token operator"},"*"),Object(s.b)("span",{parentName:"code",className:"token number"},"2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"return")," x",Object(s.b)("span",{parentName:"code",className:"token operator"},"+"),Object(s.b)("span",{parentName:"code",className:"token number"},"2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//ok")))),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"4、如果单行箭头返回对象，用圆括号包裹")),Object(s.b)("p",null,"错误的书写，如下段代码所示,解析引擎会将其解析成一个多行箭头函数："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"text"},Object(s.b)("pre",{parentName:"div",className:"language-text"},Object(s.b)("code",{parentName:"pre",className:"language-text"},"const ids=[1,2,3];\nconst users=ids.map(id=>{id:id});\n//wrong[ undefined, undefined, undefined ]"))),Object(s.b)("p",null,"正确的书写，如下段代码所示："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"text"},Object(s.b)("pre",{parentName:"div",className:"language-text"},Object(s.b)("code",{parentName:"pre",className:"language-text"},"const ids=[1,2,3];\nconst users=ids.map(id=>({id:id}));\n//Correct:[ { id: 1 }, { id: 2 }, { id: 3 } ]"))),Object(s.b)("h2",{className:"__internal",id:"4-示例"},"4. 示例",Object(s.b)("a",{parentName:"h2",href:"#4-%E7%A4%BA%E4%BE%8B","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("p",null,"箭头函数十分简洁，特别适合单行回调函数的定义，比如我们有以下需求:"),Object(s.b)("p",null,"我们有一个这样的名字数组names=","['Will','Jack','Peter','Steve','John','Hugo','Mike']","，输出序号为偶数的名字","[ 'Will', 'Peter', 'John', 'Mike' ]",",我们如何使用简洁的箭头语法呢？如下段代码所示："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," names",Object(s.b)("span",{parentName:"code",className:"token operator"},"="),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token string"},"'Will'"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token string"},"'Jack'"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token string"},"'Peter'"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token string"},"'Steve'"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token string"},"'John'"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token string"},"'Hugo'"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token string"},"'Mike'"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," newSet",Object(s.b)("span",{parentName:"code",className:"token operator"},"="),"names\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"map"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"name",Object(s.b)("span",{parentName:"span",className:"token punctuation"},","),"index"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token operator"},"=>"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  id",Object(s.b)("span",{parentName:"code",className:"token operator"},":"),"index",Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"\n  name",Object(s.b)("span",{parentName:"code",className:"token operator"},":"),"name\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"filter"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"man")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=>")," man",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"id ",Object(s.b)("span",{parentName:"code",className:"token operator"},"%"),Object(s.b)("span",{parentName:"code",className:"token number"},"2")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=="),Object(s.b)("span",{parentName:"code",className:"token number"},"0"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"map"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"man")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=>")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),"man",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"name",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"reduce"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"a",Object(s.b)("span",{parentName:"span",className:"token punctuation"},","),"b"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=>")," a",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"concat"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"b",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")))),Object(s.b)("h2",{className:"__internal",id:"5-this穿透"},"5. this穿透",Object(s.b)("a",{parentName:"h2",href:"#5-this%E7%A9%BF%E9%80%8F","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("p",null,"事实上，箭头函数不仅书写简洁，还有一个神奇的功能，就是将函数内部的this延伸上一层作用域中，介绍之前，先让我们一起看下如下代码："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"var")," Widget",Object(s.b)("span",{parentName:"code",className:"token operator"},"="),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// A"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"init"),Object(s.b)("span",{parentName:"code",className:"token operator"},":"),Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// B"),"\n  document",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"addEventListener"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"click"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"event"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//C"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"doSomething"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"event",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"type",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token boolean"},"false"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"doSomething"),Object(s.b)("span",{parentName:"code",className:"token operator"},":"),Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"type"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"Handling"'),Object(s.b)("span",{parentName:"code",className:"token operator"},"+")," type",Object(s.b)("span",{parentName:"code",className:"token operator"},"+"),Object(s.b)("span",{parentName:"code",className:"token string"},'"event"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nWidget",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"init"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")))),Object(s.b)("p",null,"这段代码会如何输出呢，想必大家都猜到了吧，输出undefined,为什么呢？我们在B位置内声明了函数（C区域），this关键词的指向B区域的函数，由于B区域内没有doSomething函数声明，因此输出undefined，ES6之前我们如何修正此问题呢？"),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"方法一")," 我们可以使用bind方法改变this指向A区域Widget对象，示例代码如下："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"var")," Widget",Object(s.b)("span",{parentName:"code",className:"token operator"},"="),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// A"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"init"),Object(s.b)("span",{parentName:"code",className:"token operator"},":"),Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// B"),"\n  document",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"addEventListener"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"click"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"event"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//C"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"doSomething"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"event",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"type",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"bind"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token boolean"},"false"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"doSomething"),Object(s.b)("span",{parentName:"code",className:"token operator"},":"),Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"type"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"Handling"'),Object(s.b)("span",{parentName:"code",className:"token operator"},"+")," type",Object(s.b)("span",{parentName:"code",className:"token operator"},"+"),Object(s.b)("span",{parentName:"code",className:"token string"},'"event"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nWidget",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"init"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")))),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"方法二"),"这种方法是我们最常用的方法，我们在B区域声明了that变量，并将其this赋值，确保c区域this的指向至Widget对象："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"var")," Widget",Object(s.b)("span",{parentName:"code",className:"token operator"},"="),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// A"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"init"),Object(s.b)("span",{parentName:"code",className:"token operator"},":"),Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// B"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"var")," that",Object(s.b)("span",{parentName:"code",className:"token operator"},"="),Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  document",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"addEventListener"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"click"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"event"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//C"),"\n  that",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"doSomething"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"event",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"type",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"that",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token boolean"},"false"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"doSomething"),Object(s.b)("span",{parentName:"code",className:"token operator"},":"),Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"type"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"Handling"'),Object(s.b)("span",{parentName:"code",className:"token operator"},"+")," type",Object(s.b)("span",{parentName:"code",className:"token operator"},"+"),Object(s.b)("span",{parentName:"code",className:"token string"},'"event"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nWidget",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"init"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")))),Object(s.b)("p",null,"有了箭头函数，我们可以使用箭头函数的this穿透功能特性，将this的作用域延伸至上一层B区域函数，如下段代码所示:"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"var")," Widget",Object(s.b)("span",{parentName:"code",className:"token operator"},"="),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//A"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"init"),Object(s.b)("span",{parentName:"code",className:"token operator"},":"),Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//B"),"\n  document",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"addEventListener"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"click"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"event"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=>")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//C"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"doSomething"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"event",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"type",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token boolean"},"false"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"doSomething"),Object(s.b)("span",{parentName:"code",className:"token operator"},":"),Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"type"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"Handling"'),Object(s.b)("span",{parentName:"code",className:"token operator"},"+")," type",Object(s.b)("span",{parentName:"code",className:"token operator"},"+"),Object(s.b)("span",{parentName:"code",className:"token string"},'"event"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nWidget",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"init"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")))),Object(s.b)("p",null,"箭头函数是不是更简单，代码更清晰呢。"),Object(s.b)("p",null,"还有一个情况需要注意，箭头函数对上下文的绑定是强制的，无法通过call或aplly进行改变，如下段代码所示："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"text"},Object(s.b)("pre",{parentName:"div",className:"language-text"},Object(s.b)("code",{parentName:"pre",className:"language-text"},"function widget() {\n  this.id=123;\n  this.log=()=>{\n  console.log('widget log',this.id);\n  }\n}\nvar pseudoWidget={\n  id:456\n};\nnew widget().log.call(pseudoWidget);"))),Object(s.b)("p",null,"上述代码会如何输出呢？由于箭头函数对上下文的绑定是强制的，因此this指向不会指向pseudoWidget对象,还是保持widget的函数作用域，因此输出123。"),Object(s.b)("h2",{className:"__internal",id:"6-箭头函数和传统函数的区别"},"6. 箭头函数和传统函数的区别",Object(s.b)("a",{parentName:"h2",href:"#6-%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E5%92%8C%E4%BC%A0%E7%BB%9F%E5%87%BD%E6%95%B0%E7%9A%84%E5%8C%BA%E5%88%AB","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"1、箭头函数作为匿名函数,是不能作为构造函数的,不能使用new")),Object(s.b)("p",null,"如下段代码所示，我们使用new方法，会提示如下信息："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"text"},Object(s.b)("pre",{parentName:"div",className:"language-text"},Object(s.b)("code",{parentName:"pre",className:"language-text"},'const B =()=>({wechat:"ABCD"});\nlet b = new B(); //TypeError: B is not a constructor'))),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"2、箭头函数不绑定arguments,可以使用剩余参数(rest)解决")),Object(s.b)("p",null,Object(s.b)("a",{parentName:"p",href:"./05.%20%E5%B1%95%E5%BC%80%E8%AF%AD%E6%B3%95.md"},"展开语法"),"里介绍过剩余参数。如下段代码所示："),Object(s.b)("div",{className:"rcpress-highlight","data-language":"text"},Object(s.b)("pre",{parentName:"div",className:"language-text"},Object(s.b)("code",{parentName:"pre",className:"language-text"},"function A(a){\n  console.log(arguments); //\\[object Arguments] {0: 1}\n}\nvar B = (b)=>{\n  console.log(arguments); //ReferenceError: arguments is not defined\n};\nvar C = (...c)=>{ //...c即为rest参数\n  console.log(c); //[3]\n};\nA(1);\nB(2);\nC(3);"))),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"3、箭头函数this指向具备穿透特性，会捕获其所在上下文的this值")),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"4、箭头函数没有原型属性")),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"var")," ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"a")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token operator"},"=>"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"return")," ",Object(s.b)("span",{parentName:"code",className:"token string"},"'ABCD'"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"b"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"return")," ",Object(s.b)("span",{parentName:"code",className:"token string"},"'ABCD'"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"a",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),Object(s.b)("span",{parentName:"code",className:"token comment"},"//undefined"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"b",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),Object(s.b)("span",{parentName:"code",className:"token comment"},"//object{...}")))),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"5、箭头函数不能当做Generator函数,不能使用yield关键字")),Object(s.b)("p",null,Object(s.b)("strong",{parentName:"p"},"6、箭头函数对上下文的绑定是强制的，无法通过call或aplly进行改变")))}d.isMDXComponent=!0,d=Object(c.hot)(e)(d),(m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(m.register(r,"makeShortcode","E:\\h-project\\my-blog\\docs\\notes\\2021-06-26.md"),m.register(l,"Footer","E:\\h-project\\my-blog\\docs\\notes\\2021-06-26.md"),m.register(u,"layoutProps","E:\\h-project\\my-blog\\docs\\notes\\2021-06-26.md"),m.register("wrapper","MDXLayout","E:\\h-project\\my-blog\\docs\\notes\\2021-06-26.md"),m.register(d,"MDXContent","E:\\h-project\\my-blog\\docs\\notes\\2021-06-26.md")),(N="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&N(e)}.call(this,t(3)(e))}}]);