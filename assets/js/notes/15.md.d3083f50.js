(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{437:function(e,a,n){"use strict";n.r(a),function(e){n.d(a,"default",(function(){return j}));var t,c=n(169),s=(n(409),n(0),n(170)),o=["components"];function p(){return(p=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}function b(e,a){if(null==e)return{};var n,t,c=function(e,a){if(null==e)return{};var n,t,c={},s=Object.keys(e);for(t=0;t<s.length;t++)n=s[t],a.indexOf(n)>=0||(c[n]=e[n]);return c}(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)n=s[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}(t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&t(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var m,N,r=function(e){return function(a){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),Object(s.b)("div",a)}},l=r("Footer"),u=r("ImageWrap"),d={};function j(e){var a=e.components,n=b(e,o);return Object(s.b)("wrapper",p({},d,n,{components:a,mdxType:"MDXLayout"}),Object(s.b)("blockquote",null,Object(s.b)(l,{mdxType:"Footer"})),Object(s.b)("h1",{className:"__internal",id:"15能动手别bb"},"15.能动手别BB",Object(s.b)("a",{parentName:"h1",href:"#15%E8%83%BD%E5%8A%A8%E6%89%8B%E5%88%ABbb","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("h2",{className:"__internal",id:"1实现new"},"1.实现new",Object(s.b)("a",{parentName:"h2",href:"#1%E5%AE%9E%E7%8E%B0new","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"Parent")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"name",Object(s.b)("span",{parentName:"span",className:"token punctuation"},","),"age"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//1.创建一个新对象，赋予this，这一步是隐性的，等同于let this = {}"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//2.给this指向的对象赋予构造属性"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"name ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," name",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"age ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," age",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//3.如果没有手动返回对象，则默认返回this指向的这个对象，也是隐性的 这里的return this是非必须的"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"return")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," child ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Parent"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")))),Object(s.b)("p",null,"在《JavaScript模式》这本书中，new的过程说的比较直白，当我们new一个构造器，主要有三步："),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"• 创建一个",Object(s.b)("strong",{parentName:"p"},"空对象"),"，将它的引用赋给 this，继承函数的原型。"),Object(s.b)("p",{parentName:"blockquote"},"• 通过 this 将",Object(s.b)("strong",{parentName:"p"},"属性"),"和",Object(s.b)("strong",{parentName:"p"},"方法"),"添加至这个对象"),Object(s.b)("p",{parentName:"blockquote"},"• 最后返回 this 指向的",Object(s.b)("strong",{parentName:"p"},"新对象"),"，也就是实例")),Object(s.b)("p",null,"那如何来实现呢?"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"myNew"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 创建一个空对象"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," obj ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Object"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// (1)"),"\n\n    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 处理构建函数 将构造函数的作用域赋给新对象"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 就是给这个新对象构造原型链，链接到构造函数的原型对象上，从而新对象就可以访问构造函数中的属性和方法"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 构造函数就是我们传入的第一个参数。由于arguments是类数组，我们不能直接使用shift方法，我们可以使用call来调用Array上的shift方法"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," constructor ",Object(s.b)("span",{parentName:"code",className:"token operator"},"="),"  ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Array"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"shift"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"call"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"arguments",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),Object(s.b)("span",{parentName:"code",className:"token comment"},"//(2)"),"\n\n    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 我们把obj的原型指向构造函数的原型对象上"),"\n    obj",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"__proto__ ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," constructor",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// (3)"),"\n   ",Object(s.b)("span",{parentName:"code",className:"token comment"},"/*********/"),"\n   ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// let obj = new Object()来说，执行的时候obj.__proto__是指向Object.prototype的原型。"),"\n   ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 如果使用 Object.create(object, objectProps)这种方法，第一个参数就是要创建的对象的原型，如果赋值为null，"),"\n   ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 则得到的obj没有任何原型；如果我们想要新对象使用构造函数的原型，那么只需要"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," myNewObj ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," Object",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"create"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"constructor",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 等价于 （1）（3）"),"\n   ",Object(s.b)("span",{parentName:"code",className:"token comment"},"/*********/"),"\n\n    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 最后我们为这个新的对象添加属性与方法 执行一下就可以了。"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," newObj ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"constructor"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"apply"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"obj",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," arguments",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),Object(s.b)("span",{parentName:"code",className:"token comment"},"// (4)"),"\n\n    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 如果构造函数有返回值，则返回值，没有就返回这个新的对象 ，这里还需要考虑构造函数显示返回 null 的情况"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token comment"},'// return typeof newObj === "object" ? newObj || obj : obj; // (5)'),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"return"),"  newObj ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"instanceof"),"  ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Object")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"?")," newObj ",Object(s.b)("span",{parentName:"code",className:"token operator"},"||")," obj ",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," obj",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// (5)"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"person"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"name",Object(s.b)("span",{parentName:"span",className:"token punctuation"},",")," age"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"name ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," name\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"age ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," age\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," p ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"myNew"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"person",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"测试"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"12"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"p",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"  ",Object(s.b)("span",{parentName:"code",className:"token comment"},'// { name: "测试", age: 12 }'),"\n\n"))),Object(s.b)("h2",{className:"__internal",id:"2实现instanceof"},"2.实现instanceof",Object(s.b)("a",{parentName:"h2",href:"#2%E5%AE%9E%E7%8E%B0instanceof","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"在上面的实现的new的过程中，我们在最后判断构造函数的是返回值时用到了instanceof做为我们的类型判断")),Object(s.b)("hr",null),Object(s.b)("p",null,"补充一下，关于我们类型判断有下面几种方式"),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"tips: 这里不重要")),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul",className:"__internal"},"typeof"),Object(s.b)("li",{parentName:"ul",className:"__internal"},"Object.prototype.toString"),Object(s.b)("li",{parentName:"ul",className:"__internal"},"instanceof"),Object(s.b)("li",{parentName:"ul",className:"__internal"},"constructor"),Object(s.b)("li",{parentName:"ul",className:"__internal"},"$.type")),Object(s.b)("h3",{className:"__internal",id:"21-typeof用于类型判断"},"2.1 typeof用于类型判断",Object(s.b)("a",{parentName:"h3",href:"#21-typeof%E7%94%A8%E4%BA%8E%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("table",null,Object(s.b)("thead",{parentName:"table"},Object(s.b)("tr",{parentName:"thead"},Object(s.b)("th",{parentName:"tr",align:null},"判断"),Object(s.b)("th",{parentName:"tr",align:"center"},"结果"))),Object(s.b)("tbody",{parentName:"table"},Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"typeof 3 （整数，小数，",Object(s.b)("a",{parentName:"td",href:"http://www.w3school.com.cn/jsref/jsref_ln2.asp",target:"_blank"},"自然对数Math.LN2"),"，",Object(s.b)("a",{parentName:"td",href:"http://www.w3school.com.cn/jsref/jsref_infinity.asp",target:"_blank"},"正无穷大数Infinity"),"）"),Object(s.b)("td",{parentName:"tr",align:"center"},'"number"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"typeof NaN"),Object(s.b)("td",{parentName:"tr",align:"center"},'"number"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"typeof (function(){})"),Object(s.b)("td",{parentName:"tr",align:"center"},'"function"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},'typeof Math.sin === "function"'),Object(s.b)("td",{parentName:"tr",align:"center"},'"function"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"typeof undefined"),Object(s.b)("td",{parentName:"tr",align:"center"},'"undefined"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},'typeof "3"'),Object(s.b)("td",{parentName:"tr",align:"center"},'"string"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},'typeof ""'),Object(s.b)("td",{parentName:"tr",align:"center"},'"string"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"typeof true"),Object(s.b)("td",{parentName:"tr",align:"center"},'"boolean"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"typeof false"),Object(s.b)("td",{parentName:"tr",align:"center"},'"boolean"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"typeof Symbol()"),Object(s.b)("td",{parentName:"tr",align:"center"},'"symbol"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"typeof Symbol.iterator"),Object(s.b)("td",{parentName:"tr",align:"center"},'"symbol"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"typeof null"),Object(s.b)("td",{parentName:"tr",align:"center"},'"object"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"typeof {}"),Object(s.b)("td",{parentName:"tr",align:"center"},'"object"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"typeof new Date()"),Object(s.b)("td",{parentName:"tr",align:"center"},'"object"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"typeof []"),Object(s.b)("td",{parentName:"tr",align:"center"},'"object"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"typeof /\\d/（正则）"),Object(s.b)("td",{parentName:"tr",align:"center"},'"object"')))),Object(s.b)("h3",{className:"__internal",id:"22-objectprototypetostring推荐"},"2.2 Object.prototype.toString(推荐)",Object(s.b)("a",{parentName:"h3",href:"#22-objectprototypetostring%E6%8E%A8%E8%8D%90","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"原生原型扩展函数，用来精确的区分数据类型，")),Object(s.b)("table",null,Object(s.b)("thead",{parentName:"table"},Object(s.b)("tr",{parentName:"thead"},Object(s.b)("th",{parentName:"tr",align:null},"判断"),Object(s.b)("th",{parentName:"tr",align:"center"},"结果"))),Object(s.b)("tbody",{parentName:"table"},Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"Object.prototype.toString.call(3)"),Object(s.b)("td",{parentName:"tr",align:"center"},'"',"[object Number]",'"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"Object.prototype.toString.call(NaN)"),Object(s.b)("td",{parentName:"tr",align:"center"},'"',"[object Number]",'"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"Object.prototype.toString.call((function(){}))"),Object(s.b)("td",{parentName:"tr",align:"center"},'"',"[object Function]",'"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"Object.prototype.toString.call(undefined)"),Object(s.b)("td",{parentName:"tr",align:"center"},'"',"[object Undefined]",'"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"Object.prototype.toString.call(null)"),Object(s.b)("td",{parentName:"tr",align:"center"},'"',"[object Null]",'"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},'Object.prototype.toString.call("3")'),Object(s.b)("td",{parentName:"tr",align:"center"},'"',"[object String]",'"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"Object.prototype.toString.call(true)"),Object(s.b)("td",{parentName:"tr",align:"center"},'"',"[object Boolean]",'"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"Object.prototype.toString.call(Symbol())"),Object(s.b)("td",{parentName:"tr",align:"center"},'"',"[object Symbol]",'"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"Object.prototype.toString.call({})"),Object(s.b)("td",{parentName:"tr",align:"center"},'"',"[object Object]",'"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"Object.prototype.toString.call([])"),Object(s.b)("td",{parentName:"tr",align:"center"},'"',"[object Array]",'"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"Object.prototype.toString.call(new Date())"),Object(s.b)("td",{parentName:"tr",align:"center"},'"',"[object Date]",'"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"Object.prototype.toString.call(/\\d/)"),Object(s.b)("td",{parentName:"tr",align:"center"},'"',"[object RegExp]",'"')))),Object(s.b)("h3",{className:"__internal",id:"23-instanceof"},"2.3 instanceof",Object(s.b)("a",{parentName:"h3",href:"#23-instanceof","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"主要判断构造函数的prototype是不是在对象原型链中，用于检测引用类型的判断方法，针对Array和RegExp进行判断。")),Object(s.b)("table",null,Object(s.b)("thead",{parentName:"table"},Object(s.b)("tr",{parentName:"thead"},Object(s.b)("th",{parentName:"tr",align:null},"判断"),Object(s.b)("th",{parentName:"tr",align:"center"},"结果"))),Object(s.b)("tbody",{parentName:"table"},Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"[] instanceof Array"),Object(s.b)("td",{parentName:"tr",align:"center"},"true")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"/","\\","d/ instanceof RegExp"),Object(s.b)("td",{parentName:"tr",align:"center"},"true")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},'"" instanceof String'),Object(s.b)("td",{parentName:"tr",align:"center"},"false")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"String instanceof String"),Object(s.b)("td",{parentName:"tr",align:"center"},"false")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"1 instanceof Number"),Object(s.b)("td",{parentName:"tr",align:"center"},"false")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"Number instanceof Number"),Object(s.b)("td",{parentName:"tr",align:"center"},"false")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"true instanceof Boolean"),Object(s.b)("td",{parentName:"tr",align:"center"},"false")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"null instanceof Object"),Object(s.b)("td",{parentName:"tr",align:"center"},"false")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"{} instanceof Object（{}和function(){}都为Object，没法区分对象和方法"),Object(s.b)("td",{parentName:"tr",align:"center"},"true")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"function(){} instanceof Object（方法既是Object又是Function"),Object(s.b)("td",{parentName:"tr",align:"center"},"true")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"function(){} instanceof Function"),Object(s.b)("td",{parentName:"tr",align:"center"},"true")))),Object(s.b)("h3",{className:"__internal",id:"24-constructor"},"2.4 constructor",Object(s.b)("a",{parentName:"h3",href:"#24-constructor","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"返回对创建此对象的函数的引用，每个具有原型的对象都会自动获得constructor属性")),Object(s.b)("table",null,Object(s.b)("thead",{parentName:"table"},Object(s.b)("tr",{parentName:"thead"},Object(s.b)("th",{parentName:"tr",align:null},"判断"),Object(s.b)("th",{parentName:"tr",align:"center"},"结果"))),Object(s.b)("tbody",{parentName:"table"},Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"new Number(3).constructor === Number"),Object(s.b)("td",{parentName:"tr",align:"center"},"true")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"new Function().constructor === Function"),Object(s.b)("td",{parentName:"tr",align:"center"},"true")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},'"".constructor === String'),Object(s.b)("td",{parentName:"tr",align:"center"},"true")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"new Boolean().constructor === Boolean"),Object(s.b)("td",{parentName:"tr",align:"center"},"true")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"new Object().constructor === Object"),Object(s.b)("td",{parentName:"tr",align:"center"},"true")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"new Date().constructor === Date"),Object(s.b)("td",{parentName:"tr",align:"center"},"true")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"[].constructor === Array"),Object(s.b)("td",{parentName:"tr",align:"center"},"true")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"new Error().constructor === Error"),Object(s.b)("td",{parentName:"tr",align:"center"},"true")))),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"注意 关于类的继承有个坑")),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"}," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token constant"},"A"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token constant"},"B"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//A继承自B"),"\n ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"A"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"B"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//创建A对象的实例"),"\n ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," AObject ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"A"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 注意开车了"),"\n console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token class-name"},"AObject"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"constructor ",Object(s.b)("span",{parentName:"code",className:"token operator"},"===")," ",Object(s.b)("span",{parentName:"code",className:"token constant"},"B"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//true;"),"\n console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token class-name"},"AObject"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"constructor ",Object(s.b)("span",{parentName:"code",className:"token operator"},"===")," ",Object(s.b)("span",{parentName:"code",className:"token constant"},"A"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//false;"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"//instanceof方法中对象直接继承和间接继承的都会报true"),"\n console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"AObject ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"instanceof")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"B"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//true;"),"\n\n console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"AObject ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"instanceof")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"A"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// true;"),"\n\n ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//解决construtor的问题通常是让对象的constructor手动指向自己"),"\n ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//将自己的类赋值给对象的constructor属性"),"\n ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"AObject"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"constructor ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token constant"},"A"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token class-name"},"AObject"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"constructor ",Object(s.b)("span",{parentName:"code",className:"token operator"},"===")," ",Object(s.b)("span",{parentName:"code",className:"token constant"},"A"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// true;"),"\n console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token class-name"},"AObject"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"constructor ",Object(s.b)("span",{parentName:"code",className:"token operator"},"===")," ",Object(s.b)("span",{parentName:"code",className:"token constant"},"B"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// false;基类不会报true了;")))),Object(s.b)("h3",{className:"__internal",id:"25-type知道就行了不重要"},"2.5 $.type(知道就行了,不重要)",Object(s.b)("a",{parentName:"h3",href:"#25-type%E7%9F%A5%E9%81%93%E5%B0%B1%E8%A1%8C%E4%BA%86%E4%B8%8D%E9%87%8D%E8%A6%81","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"JQ提供的一个类型判断方法")),Object(s.b)("table",null,Object(s.b)("thead",{parentName:"table"},Object(s.b)("tr",{parentName:"thead"},Object(s.b)("th",{parentName:"tr",align:null},"判断"),Object(s.b)("th",{parentName:"tr",align:"center"},"结果"))),Object(s.b)("tbody",{parentName:"table"},Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"$.type(3)"),Object(s.b)("td",{parentName:"tr",align:"center"},'"number"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"$.type(NaN)"),Object(s.b)("td",{parentName:"tr",align:"center"},'"number"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"$.type((function(){}))"),Object(s.b)("td",{parentName:"tr",align:"center"},'"function"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"$.type(undefined)"),Object(s.b)("td",{parentName:"tr",align:"center"},'"undefined"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},'$.type("3")'),Object(s.b)("td",{parentName:"tr",align:"center"},'"string"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"$.type(true)"),Object(s.b)("td",{parentName:"tr",align:"center"},'"boolean"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"$.type(Symbol())"),Object(s.b)("td",{parentName:"tr",align:"center"},'"Symbol()"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"$.type({})"),Object(s.b)("td",{parentName:"tr",align:"center"},'"object"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"$.type(new Date())"),Object(s.b)("td",{parentName:"tr",align:"center"},'"date"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"$.type([])"),Object(s.b)("td",{parentName:"tr",align:"center"},'"array"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"$.type(null)"),Object(s.b)("td",{parentName:"tr",align:"center"},'"null"')),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",{parentName:"tr",align:null},"$.type(/\\d/)"),Object(s.b)("td",{parentName:"tr",align:"center"},'"regexp"')))),Object(s.b)("hr",null),Object(s.b)("h3",{className:"__internal",id:"26-如何实现instanceof"},"2.6 如何实现instanceof",Object(s.b)("a",{parentName:"h3",href:"#26-%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0instanceof","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("blockquote",null,Object(s.b)(u,{title:"原型链",src:"/images/my-prototype.png",mdxType:"ImageWrap"})),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"}," instanceof 是通过原型链判断的，A instanceof B, 在A的原型链中层层查找，是否有原型等于B.prototype，如果一直找到A的原型链的顶端null,仍然不等于B.prototype，那么返回false，否则返回true.")),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul",className:"__internal"},"直接通过原型链的判断方法进行实现")),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},Object(s.b)("span",{parentName:"span",className:"token constant"},"L"),Object(s.b)("span",{parentName:"span",className:"token punctuation"},","),Object(s.b)("span",{parentName:"span",className:"token constant"},"R")),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"//L 表示左表达式，R 表示右表达式"),"\n      ",Object(s.b)("span",{parentName:"code",className:"token constant"},"L")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token constant"},"L"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"__proto__",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 等价于 Object.getPrototypeOf(L)"),"\n      ",Object(s.b)("span",{parentName:"code",className:"token constant"},"R")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"R"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n      ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"while"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token boolean"},"true"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n           ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"if"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token constant"},"L")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"==")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"null"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n                ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"return")," ",Object(s.b)("span",{parentName:"code",className:"token boolean"},"false"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n           ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"if"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token constant"},"L")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"===")," ",Object(s.b)("span",{parentName:"code",className:"token constant"},"R"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n                ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"return")," ",Object(s.b)("span",{parentName:"code",className:"token boolean"},"true"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n           ",Object(s.b)("span",{parentName:"code",className:"token constant"},"L")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token constant"},"L"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"__proto__",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n      ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," a ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," b ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"Foo"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," f ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Foo"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"child"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"father"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\nchild",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"father"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," d ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"child"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"a",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," Array",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// true"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"b",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," Object",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// true"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"b",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," Array",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// false"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"a",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," Object",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// true"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"f",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," Foo",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),Object(s.b)("span",{parentName:"code",className:"token comment"},"// true"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"Foo",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," Foo",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// false ????"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"d",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," child",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// true"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"d",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," father",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// true"),"\n"))),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul",className:"__internal"},"通过constructor来实现,但是如果对于",Object(s.b)("strong",{parentName:"li"},"继承"),"的就",Object(s.b)("strong",{parentName:"li"},"无法判断"),"了")),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},Object(s.b)("span",{parentName:"span",className:"token constant"},"L"),Object(s.b)("span",{parentName:"span",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"span",className:"token constant"},"R")),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(s.b)("span",{parentName:"code",className:"token comment"},"//L 表示左表达式，R 表示右表达式"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token constant"},"L")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token constant"},"L"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"__proto__",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"while")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token boolean"},"true"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"if")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token constant"},"L")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"===")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"null"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n      ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"return")," ",Object(s.b)("span",{parentName:"code",className:"token boolean"},"false"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"if")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token constant"},"R")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"===")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"L"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"constructor",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n      ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"return")," ",Object(s.b)("span",{parentName:"code",className:"token boolean"},"true"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token constant"},"L")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token constant"},"L"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"__proto__",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 开始测试"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," a ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," b ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"Foo"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," f ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Foo"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"child"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"father"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\nchild",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"father"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," c ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"child"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"a",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," Array",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// true"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"b",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," Object",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// true"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"b",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," Array",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// false"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"a",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," Object",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// true"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"f",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," Foo",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// true"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"c",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," child",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// false 这里就是无法用于判断继承的"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"c",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," father",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// true")))),Object(s.b)("h2",{className:"__internal",id:"3实现objectcreate"},"3.实现Object.create",Object(s.b)("a",{parentName:"h2",href:"#3%E5%AE%9E%E7%8E%B0objectcreate","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("p",null,Object(s.b)("inlineCode",{parentName:"p"},"Object.create()")," 方法创建一个新对象，使用现有的对象来提供新创建的对象的",Object(s.b)("inlineCode",{parentName:"p"},"__proto__"),"。"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," person ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  isSB",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token boolean"},"false"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"print"),Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token template-string"},Object(s.b)("span",{parentName:"span",className:"token template-punctuation string"},"`"),Object(s.b)("span",{parentName:"span",className:"token string"},"你的姓名是: "),Object(s.b)("span",{parentName:"span",className:"token interpolation"},Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"${"),Object(s.b)("span",{parentName:"span",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"span",className:"token punctuation"},"."),"name",Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"}")),Object(s.b)("span",{parentName:"span",className:"token string"},",你是不是SB呢? "),Object(s.b)("span",{parentName:"span",className:"token interpolation"},Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"${"),Object(s.b)("span",{parentName:"span",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"span",className:"token punctuation"},"."),"isSB",Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"}")),Object(s.b)("span",{parentName:"span",className:"token template-punctuation string"},"`")),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," your ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," Object",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"create"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"person",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\nyour",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"name ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"隔壁王叔"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nyour",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"isSB ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token boolean"},"true"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nyour",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"print"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n"))),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"newCreate"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"proto",Object(s.b)("span",{parentName:"span",className:"token punctuation"},",")," propertiesObject"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"if")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"typeof")," proto ",Object(s.b)("span",{parentName:"code",className:"token operator"},"!==")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"object"')," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"&&")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"typeof")," proto ",Object(s.b)("span",{parentName:"code",className:"token operator"},"!==")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"function"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"throw")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"TypeError"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"Object prototype may only be an Object: "')," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"+")," proto",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"if")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"propertiesObject ",Object(s.b)("span",{parentName:"code",className:"token operator"},"==")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"null"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"TypeError"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"Cannot convert undefined or null to object"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token constant"},"F"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// Object.create创建的对象的原型其实就是proto"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"F"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," proto\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," o ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"F"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"if")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"propertiesObject ",Object(s.b)("span",{parentName:"code",className:"token operator"},"!==")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"undefined"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        Object",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"keys"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"propertiesObject",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"forEach"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"prop")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=>")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n            ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," desc ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," propertiesObject",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),"prop",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n            ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 给我们的属性添加描述符"),"\n            ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"if")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"typeof")," desc ",Object(s.b)("span",{parentName:"code",className:"token operator"},"!==")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"object"')," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"||")," desc ",Object(s.b)("span",{parentName:"code",className:"token operator"},"===")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"null"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n                ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"throw")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"TypeError"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"Object prorotype may only be an Object: "')," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"+")," desc",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n            ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"else")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n                Object",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"defineProperty"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"o",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," prop",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," desc",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n            ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n        ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"return")," o\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Object"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"newCreate ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," newCreate",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," person ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  isSB",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token boolean"},"false"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"print"),Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token template-string"},Object(s.b)("span",{parentName:"span",className:"token template-punctuation string"},"`"),Object(s.b)("span",{parentName:"span",className:"token string"},"你的姓名是: "),Object(s.b)("span",{parentName:"span",className:"token interpolation"},Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"${"),Object(s.b)("span",{parentName:"span",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"span",className:"token punctuation"},"."),"name",Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"}")),Object(s.b)("span",{parentName:"span",className:"token string"},",你是不是SB呢? "),Object(s.b)("span",{parentName:"span",className:"token interpolation"},Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"${"),Object(s.b)("span",{parentName:"span",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"span",className:"token punctuation"},"."),"isSB",Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"}")),Object(s.b)("span",{parentName:"span",className:"token template-punctuation string"},"`")),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," your ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," Object",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"newCreate"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"person",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\nyour",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"name ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"隔壁王叔"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nyour",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"isSB ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token boolean"},"true"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nyour",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"print"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n"))),Object(s.b)("h2",{className:"__internal",id:"4实现objectassign"},"4.实现Object.assign",Object(s.b)("a",{parentName:"h2",href:"#4%E5%AE%9E%E7%8E%B0objectassign","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"1.我们得要先了解Object.assign(target,...source),它实现的一个浅拷贝"),Object(s.b)("p",{parentName:"blockquote"},"2.用于将对象自身所有的",Object(s.b)("strong",{parentName:"p"},"可枚举属性"),"从一个或者多个源对象上复制到目标对象")),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," target ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{")," a",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"1"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," b",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"2")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," source ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{")," b",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"3"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," c",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"4")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," newObj ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," Object",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"assign"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"target",Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"source",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"target",Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"newObj",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// {a: 1, b: 3, c: 4} {a: 1, b: 3, c: 4} // 目标被改变"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," newObj2 ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," Object",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"assign"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"target",Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"source",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"target",Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"newObj2",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),Object(s.b)("span",{parentName:"code",className:"token comment"},"// {a: 1, b: 2} {a: 1, b: 3, c: 4}")))),Object(s.b)("p",null,"如何实现,注意一定是可枚举类型"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"myAssign"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"target",Object(s.b)("span",{parentName:"span",className:"token punctuation"},","),Object(s.b)("span",{parentName:"span",className:"token operator"},"..."),"source"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 目标对象不能为null"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"if")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"target ",Object(s.b)("span",{parentName:"code",className:"token operator"},"==")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"null"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n      ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"throw")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"TypeError"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"Cannot convert undefined or null to object"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," newObj ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"Object"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"target",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token comment"},"// 把参数转成对象"),"\n  source",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"forEach"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"function"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"obj"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n      ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"if")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"obj ",Object(s.b)("span",{parentName:"code",className:"token operator"},"!=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"null"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n          ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"for")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," key ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"in")," obj",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n            ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 这里处理的都是可枚举的"),"\n              ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"if")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"obj",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"hasOwnProperty"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"key",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n                  newObj",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),"key",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," obj",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),"key",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),"\n              ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n          ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n      ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"return")," newObj\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Object"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"myAssign ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," myAssign",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," target ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{")," a",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"1"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," b",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"2")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," source ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{")," b",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"3"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," c",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"4")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," newObj ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," Object",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"myAssign"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"target",Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"source",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"target",Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"newObj",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// {a: 1, b: 3, c: 4} {a: 1, b: 3, c: 4} // 目标被改变"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," newObj2 ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," Object",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"myAssign"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"target",Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"source",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"target",Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"newObj2",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),Object(s.b)("span",{parentName:"code",className:"token comment"},"// {a: 1, b: 2} {a: 1, b: 3, c: 4}")))),Object(s.b)("h2",{className:"__internal",id:"5实现bind、call、apply"},"5.实现bind、call、apply",Object(s.b)("a",{parentName:"h2",href:"#5%E5%AE%9E%E7%8E%B0bind%E3%80%81call%E3%80%81apply","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"前言：在我们实现这几个的时候，我们首先要了解他们的关系\n先用一个等式我们来说说一下",Object(s.b)("inlineCode",{parentName:"p"},"call"),",",Object(s.b)("inlineCode",{parentName:"p"},"apply"),",",Object(s.b)("inlineCode",{parentName:"p"},"bind"),"以及我们的",Object(s.b)("inlineCode",{parentName:"p"},"this"))),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token function"},"cat"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"call"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"dog",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," a",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," b",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"cat"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"apply"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"dog",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),"a",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," b",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token function"},"cat"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"bind"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"dog",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," a",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," b",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," dog",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"cat"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"a",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," b",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")))),Object(s.b)("p",null,"简单理解"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("p",{parentName:"li"},Object(s.b)("strong",{parentName:"p"},"定义一只猫，可以抓老鼠")),Object(s.b)("div",{parentName:"li",className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"class")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Cat")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function"},"constructor")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"name"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"name ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," name\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n  ",Object(s.b)("span",{parentName:"code",className:"token function"},"catchMouse"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"name1",Object(s.b)("span",{parentName:"span",className:"token punctuation"},",")," name2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token template-string"},Object(s.b)("span",{parentName:"span",className:"token template-punctuation string"},"`"),Object(s.b)("span",{parentName:"span",className:"token interpolation"},Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"${"),Object(s.b)("span",{parentName:"span",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"span",className:"token punctuation"},"."),"name",Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"}")),Object(s.b)("span",{parentName:"span",className:"token string"}," caught 2 mouse! They call "),Object(s.b)("span",{parentName:"span",className:"token interpolation"},Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"${"),"name1",Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"}")),Object(s.b)("span",{parentName:"span",className:"token string"}," and "),Object(s.b)("span",{parentName:"span",className:"token interpolation"},Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"${"),"name2",Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"}")),Object(s.b)("span",{parentName:"span",className:"token string"},"."),Object(s.b)("span",{parentName:"span",className:"token template-punctuation string"},"`")),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n"))),Object(s.b)("blockquote",{parentName:"li"},Object(s.b)("p",{parentName:"blockquote"},"这个猫对象有一个技能就是抓老鼠",Object(s.b)("inlineCode",{parentName:"p"},"catchMouse()")))),Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("p",{parentName:"li"},Object(s.b)("strong",{parentName:"p"},"定义一个只狗")),Object(s.b)("div",{parentName:"li",className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"class")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Dog")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function"},"constructor")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"name"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"name ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," name\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n  ",Object(s.b)("span",{parentName:"code",className:"token function"},"biteCriminals"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"name1",Object(s.b)("span",{parentName:"span",className:"token punctuation"},",")," name2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token template-string"},Object(s.b)("span",{parentName:"span",className:"token template-punctuation string"},"`"),Object(s.b)("span",{parentName:"span",className:"token interpolation"},Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"${"),Object(s.b)("span",{parentName:"span",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"span",className:"token punctuation"},"."),"name",Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"}")),Object(s.b)("span",{parentName:"span",className:"token string"}," bite 2 criminals! Their name is "),Object(s.b)("span",{parentName:"span",className:"token interpolation"},Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"${"),"name1",Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"}")),Object(s.b)("span",{parentName:"span",className:"token string"}," and "),Object(s.b)("span",{parentName:"span",className:"token interpolation"},Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"${"),"name2",Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"}")),Object(s.b)("span",{parentName:"span",className:"token string"},"."),Object(s.b)("span",{parentName:"span",className:"token template-punctuation string"},"`")),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n"))),Object(s.b)("blockquote",{parentName:"li"},Object(s.b)("p",{parentName:"blockquote"},"这个狗对象有一个技能就是咬坏人的",Object(s.b)("inlineCode",{parentName:"p"},"biteCriminals()")))),Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("p",{parentName:"li"},Object(s.b)("strong",{parentName:"p"},"实例化一只猫和一只狗")),Object(s.b)("div",{parentName:"li",className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," myCat ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Cat"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"myCat"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," myDog ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Dog"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"myDog"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\nmyCat",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"catchMouse"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"Mickey"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"Minnie"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"// myCat caught mouse! They call Mickey and Minnie."),"\n\nmyDog",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"biteCriminal"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"Tom"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"Jerry"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"// myDog bite a criminal! Their name is Tom and Jerry."),"\n"))),Object(s.b)("ul",{parentName:"li"},Object(s.b)("li",{parentName:"ul",className:"__internal"},"下面问题来了，我想让",Object(s.b)("inlineCode",{parentName:"li"},"myDog"),"具有抓老鼠的能力要怎么做呢",Object(s.b)("ul",{parentName:"li"},Object(s.b)("li",{parentName:"ul",className:"__internal"},"重新修改我们的",Object(s.b)("inlineCode",{parentName:"li"},"Dog"),",增加一个抓老鼠的技能"),Object(s.b)("li",{parentName:"ul",className:"__internal"},"让我们",Object(s.b)("inlineCode",{parentName:"li"},"myDog"),"继承",Object(s.b)("inlineCode",{parentName:"li"},"myCat"),"的抓老鼠的能力"))))),Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("p",{parentName:"li"},Object(s.b)("strong",{parentName:"p"},"简单的实现")))),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"class")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Dog")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function"},"constructor")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"name",Object(s.b)("span",{parentName:"span",className:"token punctuation"},",")," cat"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"name ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," name\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"catchMouse ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," cat",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"catchMouse\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n  ",Object(s.b)("span",{parentName:"code",className:"token function"},"biteCriminals"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"name1",Object(s.b)("span",{parentName:"span",className:"token punctuation"},",")," name2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token template-string"},Object(s.b)("span",{parentName:"span",className:"token template-punctuation string"},"`"),Object(s.b)("span",{parentName:"span",className:"token interpolation"},Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"${"),Object(s.b)("span",{parentName:"span",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"span",className:"token punctuation"},"."),"name",Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"}")),Object(s.b)("span",{parentName:"span",className:"token string"}," bite 2 criminals! Their name is "),Object(s.b)("span",{parentName:"span",className:"token interpolation"},Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"${"),"name1",Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"}")),Object(s.b)("span",{parentName:"span",className:"token string"}," and "),Object(s.b)("span",{parentName:"span",className:"token interpolation"},Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"${"),"name2",Object(s.b)("span",{parentName:"span",className:"token interpolation-punctuation punctuation"},"}")),Object(s.b)("span",{parentName:"span",className:"token string"},"."),Object(s.b)("span",{parentName:"span",className:"token template-punctuation string"},"`")),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," myCat ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Cat"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"myCat "'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," myDog",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Dog"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"myDog"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"myCat ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n\nmyDog",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"catchMouse"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"Mickey"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"Minnie"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"// myDog caught 2 mouse! They call Mickey and Minnie."),"\n"))),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"这里的就出一个问题了，我不能每次一增加或是调整都重新修改我们的",Object(s.b)("inlineCode",{parentName:"p"},"Dogy"),"\n",Object(s.b)("strong",{parentName:"p"},"让本来不具备抓老鼠能力的狗来抓老鼠"),"\n于是我们的就有了我们的",Object(s.b)("inlineCode",{parentName:"p"},"call"),",",Object(s.b)("inlineCode",{parentName:"p"},"aplly"),",",Object(s.b)("inlineCode",{parentName:"p"},"bind"))),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},"myCat",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"catchMouse"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"call"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"myDog",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"Mickey"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"Minnie"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token comment"},"// 明细参数"),"\n\nmyCat",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"catchMouse"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"apply"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"myDog",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token string"},'"Mickey"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"Minnie"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 数组"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," dogCatchMouse ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," myCat",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"catchMouse"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"bind"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"myDog",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"Mickey"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"Minnie"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n",Object(s.b)("span",{parentName:"code",className:"token function"},"doggyCatchMouse"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"// myDog caught 2 mouse! They call Mickey and Minnie."),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"// myDog caught 2 mouse! They call Mickey and Minnie."),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"// myDog caught 2 mouse! They call Mickey and Minnie."),"\n"))),Object(s.b)("p",null,"简单示例"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," a ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"10"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," obj ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n\ta",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"1"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"fn"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},Object(s.b)("span",{parentName:"span",className:"token operator"},"..."),"args"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n\tconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"a",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"args length: "'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," args",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token function"},"fn"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"call"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"obj",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"1"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n",Object(s.b)("span",{parentName:"code",className:"token function"},"fn"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"apply"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"obj",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token number"},"1"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n",Object(s.b)("span",{parentName:"code",className:"token function"},"fn"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"bind"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"obj",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"..."),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token number"},"1"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},'// 1 "args length: " (2) [1, 2]'),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},'// 1 "args length: " (2) [1, 2]'),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},'// 1 "args length: " (2) [1, 2]')))),Object(s.b)("h3",{className:"__internal",id:"51-实现bind"},"5.1 实现bind",Object(s.b)("a",{parentName:"h3",href:"#51-%E5%AE%9E%E7%8E%B0bind","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"bind 方法会创建一个新的函数，在 bind() 被调用时，这个新函数的 this 被指定为 bind() 的第一个参数，\n而其余参数将作为新函数的参数，供调用时使用。\n",Object(s.b)("strong",{parentName:"p"},"bind 是返回一个新的函数"))),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul",className:"__internal"},"bind() 除了 this 外，还可传入多个参数；"),Object(s.b)("li",{parentName:"ul",className:"__internal"},"bing 创建的新函数可能传入多个参数；"),Object(s.b)("li",{parentName:"ul",className:"__internal"},"新函数可能被当做构造函数调用；"),Object(s.b)("li",{parentName:"ul",className:"__internal"},"函数可能有返回值；")),Object(s.b)("p",null,"用法: ",Object(s.b)("inlineCode",{parentName:"p"},"fn.bind(obj|this, [param]...)"),"; // 改变fn中的this，fn并不执行"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"bar")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"name",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," arguments",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\nbar",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"name ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"bar"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," foo ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  name",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"foo"'),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," bound ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"bar"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"bind"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"foo",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"22"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"33"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"44"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"bound"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// bar, [22, 33, 44]"),"\n",Object(s.b)("span",{parentName:"code",className:"token function"},"bound"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// foo, [22, 33, 44]")))),Object(s.b)("p",null,"如何实现:"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"myBind"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"thisArg"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"if")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"typeof")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"this")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"!==")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"function"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n      ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"throw")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"TypeError"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"Bind must be called on a function"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 拿到参数，为了传给调用者"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," args ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Array"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"slice"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"call"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"arguments",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"1"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"\n      ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 保存 this"),"\n      self ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"\n      ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 构建一个干净的函数，用于保存原函数的原型"),"\n      ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"nop")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"\n      ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 绑定的函数"),"\n      ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"bound")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// this instanceof nop, 判断是否使用 new 来调用 bound"),"\n        ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 如果是 new 来调用的话，this的指向就是其实例，"),"\n        ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 如果不是 new 调用的话，就改变 this 指向到指定的对象 o"),"\n        ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"return")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"self"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"apply"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"\n          ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"this")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"instanceof")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"nop")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"?")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"this")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," thisArg",Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"\n          args",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"concat"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token class-name"},"Array"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"slice"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"call"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"arguments",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n        ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n      ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 箭头函数没有 prototype，箭头函数this永远指向它所在的作用域"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"if")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n      nop",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 修改绑定函数的原型指向"),"\n    bound",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"nop"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"return")," bound",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Function"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"myBind ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," myBind",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"bar")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"name",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," arguments",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\nbar",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"name ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"bar"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," foo ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  name",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"foo"'),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," bound ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," bar",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"myBind"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"foo",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"22"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"33"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"44"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"bound"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// bar, [22, 33, 44]"),"\n",Object(s.b)("span",{parentName:"code",className:"token function"},"bound"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// foo, [22, 33, 44]"),"\n"))),Object(s.b)("h3",{className:"__internal",id:"52-实现call"},"5.2 实现call",Object(s.b)("a",{parentName:"h3",href:"#52-%E5%AE%9E%E7%8E%B0call","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"使用一个指定的 this 值和一个或多个参数来调用一个函数。")),Object(s.b)("p",null,"用法：",Object(s.b)("inlineCode",{parentName:"p"},"fn.call([obj|this],[param]...)")," 返回函数执行结果"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},"  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"fn")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"a",Object(s.b)("span",{parentName:"span",className:"token punctuation"},",")," b"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n      console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," a",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," b",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," obj ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{")," name",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"obj"')," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function"},"fn"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"call"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"obj",Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token number"},"1"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token number"},"2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// this:obj    a:1         b:2"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function"},"fn"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"call"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token number"},"1"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token number"},"2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"        ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// this:1      a:2         b:undefined"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function"},"fn"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"call"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"           ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// this:window a:undefined b:undefined"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function"},"fn"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"call"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"null"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"       ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// this:window a:undefined b:undefined"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function"},"fn"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"call"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"undefined"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// this:window a:undefined b:undefined")))),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul",className:"__internal"},"this可能传入null|undefined,这时的this会指向window对象"),Object(s.b)("li",{parentName:"ul",className:"__internal"},"传入不固定个数的参数",Object(s.b)("inlineCode",{parentName:"li"},"?[param1,param2,param3...]")),Object(s.b)("li",{parentName:"ul",className:"__internal"},"执行一个函数,可能有返回值(",Object(s.b)("strong",{parentName:"li"},Object(s.b)("em",{parentName:"strong"},"前面在实现new的时候")),")")),Object(s.b)("p",null,"如何实现:"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"myCall"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"thisArg",Object(s.b)("span",{parentName:"span",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"span",className:"token operator"},"..."),"args"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// this指向调用call的对象"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"if")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"typeof")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"this")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"!==")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"function"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 调用call的若不是函数则报错"),"\n        ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"throw")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"TypeError"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"Error"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 声明一个 Symbol 属性，防止 fn 被占用"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," fn ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"Symbol"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"fn"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    thisArg ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," thisArg ",Object(s.b)("span",{parentName:"code",className:"token operator"},"||")," window",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 将调用call函数的对象添加到thisArg的属性中"),"\n    thisArg",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),"fn",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 执行该属性"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," result ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"undefined"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 注意这里需要处理判断一下,如果thisArg为null,undefined,数字，字符串等等"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"if")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token operator"},"!"),"thisArg",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),"fn",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"||")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"typeof")," thisArg",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),"fn",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"!==")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"function"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        result ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token operator"},"..."),"args",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"else")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        result ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," thisArg",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),"fn",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token operator"},"..."),"args",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 删除该属性"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"delete")," thisArg",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),"fn",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 返回函数执行结果"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"return")," result",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Function"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"myCall ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," myCall",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"fn")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"a",Object(s.b)("span",{parentName:"span",className:"token punctuation"},",")," b"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," a",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," b",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," obj ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{")," name",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"obj"')," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nfn",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"myCall"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"obj",Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token number"},"1"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token number"},"2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// this:obj    a:1         b:2"),"\nfn",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"myCall"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token number"},"1"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// this:1      a:2         b:undefined"),"\nfn",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"myCall"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"           ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// this:window a:undefined b:undefined"),"\nfn",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"myCall"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"null"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"       ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// this=window a=undefined b=undefined"),"\nfn",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"myCall"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"undefined"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// this=window a=undefined b=undefined"),"\n\n"))),Object(s.b)("h3",{className:"__internal",id:"53-实现apply"},"5.3 实现apply",Object(s.b)("a",{parentName:"h3",href:"#53-%E5%AE%9E%E7%8E%B0apply","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"使用一个指定的 this 值和一个或多个参数来调用一个函数。与call相同只是参数有区别")),Object(s.b)("p",null,"用法：",Object(s.b)("inlineCode",{parentName:"p"},"fn.apply([obj|this],[...param])")," 返回函数执行结果"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"}," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"fn")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"a",Object(s.b)("span",{parentName:"span",className:"token punctuation"},",")," b"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n      console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," a",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," b",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," obj ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{")," name",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"obj"')," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function"},"fn"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"apply"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"obj",Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token number"},"1"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token number"},"2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// this:obj    a:1         b:2"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function"},"fn"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"apply"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token number"},"1"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token number"},"2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"        ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// this:1      a:2         b:undefined"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function"},"fn"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"apply"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"           ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// this:window a:undefined b:undefined"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function"},"fn"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"apply"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"null"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"       ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// this:window a:undefined b:undefined"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function"},"fn"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"apply"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"undefined"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// this:window a:undefined b:undefined")))),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul",className:"__internal"},"this可能传入null|undefined,这时的this会指向window对象"),Object(s.b)("li",{parentName:"ul",className:"__internal"},"传入固定的参数",Object(s.b)("inlineCode",{parentName:"li"},"?[...params]"),",只接收数组"),Object(s.b)("li",{parentName:"ul",className:"__internal"},"执行一个函数,可能有返回值(",Object(s.b)("strong",{parentName:"li"},Object(s.b)("em",{parentName:"strong"},"前面在实现new的时候")),")")),Object(s.b)("p",null,"如何实现"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"myApply"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"thisArg",Object(s.b)("span",{parentName:"span",className:"token punctuation"},",")," args"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// this指向调用apply的对象"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"if")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"typeof")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"this")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"!==")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"function"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 调用apply的若不是函数则报错"),"\n        ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"throw")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"TypeError"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"this is no a function"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 我们需要判断是否数组"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"if")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"args ",Object(s.b)("span",{parentName:"code",className:"token operator"},"&&")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"!"),"Array",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"isArray"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"args",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 调用apply的若不是函数则报错"),"\n        ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"throw")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"TypeError"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"CreateListFromArrayLike called on non-object"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 声明一个 Symbol 属性，防止 fn 被占用"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," fn ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"Symbol"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"fn"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    thisArg ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," thisArg ",Object(s.b)("span",{parentName:"code",className:"token operator"},"||")," window",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 将调用apply函数的对象添加到thisArg的属性中"),"\n    thisArg",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),"fn",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 执行该属性"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," result ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"undefined"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 这里是需要处理一下"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 注意这里需要处理判断一下,如果thisArg为null,undefined,数字，字符串等等"),"\n    console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"args"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," args",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"if")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token operator"},"!"),"thisArg",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),"fn",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"||")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"typeof")," thisArg",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),"fn",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"!==")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"function"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        result ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token operator"},"..."),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"args ",Object(s.b)("span",{parentName:"code",className:"token operator"},"||")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"else")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n        result ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," thisArg",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),"fn",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token operator"},"..."),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"args ",Object(s.b)("span",{parentName:"code",className:"token operator"},"||")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 删除该属性"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"delete")," thisArg",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),"fn",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 返回函数执行结果"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"return")," result",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Function"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"myApply ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," myApply",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"fn")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"a",Object(s.b)("span",{parentName:"span",className:"token punctuation"},",")," b"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," a",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," b",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," obj ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{")," name",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"obj"')," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nfn",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"myApply"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"obj",Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token number"},"1"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),Object(s.b)("span",{parentName:"code",className:"token number"},"2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// this:obj    a:1         b:2"),"\nfn",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"myApply"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token number"},"1"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(s.b)("span",{parentName:"code",className:"token number"},"2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// this:1      a:2         b:undefined"),"\nfn",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"myApply"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// this:window a:undefined b:undefined"),"\nfn",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"myApply"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"null"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"       ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// this:window a:undefined b:undefined"),"\nfn",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"myApply"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"undefined"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// this:window a:undefined b:undefined"),"\n"))),Object(s.b)("h3",{className:"__internal",id:"54-关于this补充"},"5.4 关于this补充",Object(s.b)("a",{parentName:"h3",href:"#54-%E5%85%B3%E4%BA%8Ethis%E8%A1%A5%E5%85%85","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("h4",{className:"__internal",id:"541-this是什么？"},"5.4.1 this是什么？",Object(s.b)("a",{parentName:"h4",href:"#541-this%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("p",null,Object(s.b)("inlineCode",{parentName:"p"},"this")," 是 ",Object(s.b)("inlineCode",{parentName:"p"},"JavaScript")," 中的一个特殊关键字，",Object(s.b)("strong",{parentName:"p"},Object(s.b)("inlineCode",{parentName:"strong"},"this")," 和执行上下文相关，当一个函数被调用时，会建立一个活动记录，也称为执行环境。这个记录包含函数是从何处（",Object(s.b)("inlineCode",{parentName:"strong"},"call-stack"),"）被调用的，函数是如何被调用的，被传递了什么参数等信息。这个记录的属性之一，就是在函数执行期间将被使用的 ",Object(s.b)("inlineCode",{parentName:"strong"},"this")," 引用。")),Object(s.b)("h4",{className:"__internal",id:"542-为什么会到this"},"5.4.2 为什么会到this",Object(s.b)("a",{parentName:"h4",href:"#542-%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BC%9A%E5%88%B0this","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," me ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  name",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"hello this"'),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"toUpperCase"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"return")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"name",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"toUpperCase"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token function"},"toUpperCase"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"call"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"me",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"  ",Object(s.b)("span",{parentName:"code",className:"token comment"},'// "HELLO THIS"'),"\n"))),Object(s.b)("p",null,"当然以上代码也完全可以不用 ",Object(s.b)("inlineCode",{parentName:"p"},"this")," 而采用传参的形式实现。"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," me ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  name",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"hello this"'),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"toUpperCase"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"person"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"return")," person",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"name",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"toUpperCase"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token function"},"toUpperCase"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"me",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"  ",Object(s.b)("span",{parentName:"code",className:"token comment"},'// "HELLO THIS"')))),Object(s.b)("h4",{className:"__internal",id:"543-调用栈与调用点"},"5.4.3 调用栈与调用点",Object(s.b)("a",{parentName:"h4",href:"#543-%E8%B0%83%E7%94%A8%E6%A0%88%E4%B8%8E%E8%B0%83%E7%94%A8%E7%82%B9","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("p",null,Object(s.b)("inlineCode",{parentName:"p"},"this")," 不是编写时绑定，而是",Object(s.b)("strong",{parentName:"p"},"运行时绑定"),"。它依赖于函数调用的上下文条件。",Object(s.b)("inlineCode",{parentName:"p"},"this")," 绑定和函数声明的位置无关，反而和函数被",Object(s.b)("strong",{parentName:"p"},"调用的方式有关"),"，被调用的这个位置就叫",Object(s.b)("strong",{parentName:"p"},"调用点"),"。所以我们分析 ",Object(s.b)("inlineCode",{parentName:"p"},"this")," 是什么的时候就必须分析调用栈（使我们到达当前执行位置而被调用的所有方法的堆栈）和调用点。"),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"baz"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 调用栈是baz，调用点是全局作用域"),"\n  console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"baz"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function"},"bar"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 2.bar的调用点"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"bar"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 调用栈是baz -> bar，调用点位于baz的函数作用域内"),"\n  console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"bar"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token function"},"baz"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 1. baz的调用点 // 结果为 bar bar")))),Object(s.b)("p",null,"以上应该比较容易理解 ",Object(s.b)("inlineCode",{parentName:"p"},"baz")," 和 ",Object(s.b)("inlineCode",{parentName:"p"},"bar")," 函数相对应的调用点和调用栈。"),Object(s.b)("h4",{className:"__internal",id:"544-this-的指向规则"},"5.4.4 this 的指向规则",Object(s.b)("a",{parentName:"h4",href:"#544-this-%E7%9A%84%E6%8C%87%E5%90%91%E8%A7%84%E5%88%99","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("p",{parentName:"li"},Object(s.b)("strong",{parentName:"p"},"默认绑定")),Object(s.b)("blockquote",{parentName:"li"},Object(s.b)("p",{parentName:"blockquote"},"顾名思义，就是 this 没有其他规则适用时的默认规则，独立函数调用就是最常见的情况。")),Object(s.b)("div",{parentName:"li",className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," a ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"2"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"foo"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"a",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"bar"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function"},"foo"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token function"},"foo"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 2"),"\n",Object(s.b)("span",{parentName:"code",className:"token function"},"bar"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 2"),"\n"))),Object(s.b)("p",{parentName:"li"},Object(s.b)("inlineCode",{parentName:"p"},"foo")," 是一个直白的毫无修饰的函数引用调用，所以默认绑定了全局对象，当然如果是严格模式 ",Object(s.b)("inlineCode",{parentName:"p"},'"use strict"')," this 将会是 ",Object(s.b)("inlineCode",{parentName:"p"},"undefined"),"。"),Object(s.b)("p",{parentName:"li"},Object(s.b)("strong",{parentName:"p"},"注意：")," 虽然是基于调用点，但只要foo的内容没在严格模式下，那就默认绑定全局对象。"),Object(s.b)("div",{parentName:"li",className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," a ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"2"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"foo"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"a",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token string"},'"use strict"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function"},"foo"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 2"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n")))),Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("p",{parentName:"li"},Object(s.b)("strong",{parentName:"p"},"隐含绑定")),Object(s.b)("blockquote",{parentName:"li"},Object(s.b)("p",{parentName:"blockquote"},"调用点是否拥有一个环境对象，或（拥有者、容器对象）。")),Object(s.b)("div",{parentName:"li",className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"foo"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"a",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," obj ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  a",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"\n  foo",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," foo\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\nobj",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"foo"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 2"),"\n"))),Object(s.b)("p",{parentName:"li"},"当一个方法引用存在一个",Object(s.b)("strong",{parentName:"p"},"环境对象"),"，隐含规则为该对象应该被用于这个函数调用的",Object(s.b)("inlineCode",{parentName:"p"},"this"),"绑定。\n隐含绑定的情况下，容易出现",Object(s.b)("strong",{parentName:"p"},"丢失"),"的情况！当隐含绑定丢失了它的绑定，意味着它会",Object(s.b)("strong",{parentName:"p"},"回退到默认绑定"),"，下面是例子："),Object(s.b)("div",{parentName:"li",className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," a ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"3"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"foo"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"a",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," obj ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  a",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"\n  foo",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," foo\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," bar ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," obj",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"foo\n",Object(s.b)("span",{parentName:"code",className:"token function"},"bar"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 3"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 另一种微妙的情况"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"doFoo"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"fn"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    fn ",Object(s.b)("span",{parentName:"code",className:"token operator"},"&&")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"fn"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token function"},"doFoo"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"obj",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"foo",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 3"),"\n"))),Object(s.b)("p",{parentName:"li"},"函数的参数传递只是一种隐含的赋值，",Object(s.b)("inlineCode",{parentName:"p"},"fn"),"是",Object(s.b)("inlineCode",{parentName:"p"},"foo"),"函数的一个引用，",Object(s.b)("strong",{parentName:"p"},"而调用fn则是毫无掩饰的调用一个函数，默认绑定规则"),"。")),Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("p",{parentName:"li"},Object(s.b)("strong",{parentName:"p"},"明确绑定(call、apply)")),Object(s.b)("blockquote",{parentName:"li"},Object(s.b)("p",{parentName:"blockquote"},"隐含绑定需要我们改变对象自身包含一个函数的引用来使 this 隐含的绑定到这个对象上，默认绑定也是不确定的情况，但是很多时候我们希望能够明确的使一个函数调用时使用某个特定对象作为 this 绑定，而不在这个对象上放置一个函数引用属性。")),Object(s.b)("p",{parentName:"li"},"这个时候，",Object(s.b)("inlineCode",{parentName:"p"},"call")," 和 ",Object(s.b)("inlineCode",{parentName:"p"},"apply")," 就该上场了。"),Object(s.b)("p",{parentName:"li"},"JavaScript 中几乎所有的函数都能访问这两个方法，这两个方法接收的第一个参数都是一个用于 ",Object(s.b)("inlineCode",{parentName:"p"},"this")," 的对象，之后用这个指定的 ",Object(s.b)("inlineCode",{parentName:"p"},"this")," 来调用函数，这种方式就叫",Object(s.b)("strong",{parentName:"p"},"明确绑定"),"。"),Object(s.b)("div",{parentName:"li",className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"foo"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"a",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," obj ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    a",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"2"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token function"},"foo"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"call"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"obj",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"   ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 2"),"\n")))),Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("p",{parentName:"li"},Object(s.b)("strong",{parentName:"p"},"硬绑定")),Object(s.b)("blockquote",{parentName:"li"},Object(s.b)("p",{parentName:"blockquote"},"一种明确绑定的变种可以保证一个函数始终被",Object(s.b)("inlineCode",{parentName:"p"},"obj"),"调用,无论如何也不会改变，这种方式叫硬绑定，通过 ",Object(s.b)("inlineCode",{parentName:"p"},"bind")," 方法实现。")),Object(s.b)("div",{parentName:"li",className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," obj ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  a",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"2"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"foo"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"something"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"a",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," something",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"return")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"a ",Object(s.b)("span",{parentName:"code",className:"token operator"},"+")," something\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," bar ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"foo"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"bind"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"obj",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n",Object(s.b)("span",{parentName:"code",className:"token function"},"bar"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'" is a number."'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"  ",Object(s.b)("span",{parentName:"code",className:"token comment"},'// 2 ,"is a number."'),"\n"))),Object(s.b)("p",{parentName:"li"},"我们注意到采用 ",Object(s.b)("inlineCode",{parentName:"p"},"bind")," 方式进行硬绑定时，该方法返回一个函数，这和 ",Object(s.b)("inlineCode",{parentName:"p"},"call")," 和 ",Object(s.b)("inlineCode",{parentName:"p"},"apply")," 是有所区别的。")),Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("p",{parentName:"li"},Object(s.b)("strong",{parentName:"p"},"new绑定")),Object(s.b)("blockquote",{parentName:"li"},Object(s.b)("p",{parentName:"blockquote"},"传统面向对象语言中，通过 ",Object(s.b)("inlineCode",{parentName:"p"},"new")," 操作符调用构造函数会生成一个类实例。在 JavaScript 中其实没有构造器、类的概念，",Object(s.b)("inlineCode",{parentName:"p"},"new")," 调用的函数仅仅只是一个函数，只是被 ",Object(s.b)("inlineCode",{parentName:"p"},"new")," 调用时改变了行为。所以不存在构造器函数，",Object(s.b)("strong",{parentName:"p"},"只存在函数的构造器调用"),"。")),Object(s.b)("p",{parentName:"li"},Object(s.b)("inlineCode",{parentName:"p"},"new")," 操作符调用时会创建一个全新对象，连接原型链，并将这个新创建的对象设置为函数调用的 this 绑定，（默认情况）自动返回这个全新对象。"),Object(s.b)("div",{parentName:"li",className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"Foo"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"a"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"a ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," a\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," bar ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Foo"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token number"},"2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"bar",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"a",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 2"),"\n")))),Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("p",{parentName:"li"},Object(s.b)("strong",{parentName:"p"},"优先级")),Object(s.b)("blockquote",{parentName:"li"},Object(s.b)("p",{parentName:"blockquote"},"以上的规则在适用时存在优先级，级别如下：")),Object(s.b)("blockquote",{parentName:"li"},Object(s.b)("p",{parentName:"blockquote"},Object(s.b)("strong",{parentName:"p"},"硬绑定 > new 绑定 > 明确绑定 > 隐含绑定 > 默认绑定"))),Object(s.b)("p",{parentName:"li"},Object(s.b)("strong",{parentName:"p"},"判定 this 一般流程")),Object(s.b)("ul",{parentName:"li"},Object(s.b)("li",{parentName:"ul",className:"__internal"},"如果是 ",Object(s.b)("inlineCode",{parentName:"li"},"new")," 调用，this 是新构建的对象；"),Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("inlineCode",{parentName:"li"},"call"),"、",Object(s.b)("inlineCode",{parentName:"li"},"apply")," 或",Object(s.b)("inlineCode",{parentName:"li"},"bind")," ，this 是明确指定的对象；"),Object(s.b)("li",{parentName:"ul",className:"__internal"},"是用环境对象（或容器）调用的，this 是这个容器；"),Object(s.b)("li",{parentName:"ul",className:"__internal"},"默认绑定，严格模式为 ",Object(s.b)("inlineCode",{parentName:"li"},"undefined"),"，否则是global(全局)对象。"))),Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("p",{parentName:"li"},Object(s.b)("strong",{parentName:"p"},"箭头函数中的 this(内部没有this)")),Object(s.b)("blockquote",{parentName:"li"},Object(s.b)("p",{parentName:"blockquote"},"补充: 单独将箭头函数中的 ",Object(s.b)("inlineCode",{parentName:"p"},"this")," 列出来是因为并不能因为 ",Object(s.b)("inlineCode",{parentName:"p"},"this")," 在箭头函数中就有特殊的指向，而是因为",Object(s.b)("strong",{parentName:"p"},"箭头函数不会像普通函数去使用",Object(s.b)("inlineCode",{parentName:"strong"},"this"),"， 箭头函数的 ",Object(s.b)("inlineCode",{parentName:"strong"},"this")," 和外层的 ",Object(s.b)("inlineCode",{parentName:"strong"},"this "),"保持一致。这种保持一致是强力的，无法通过 ",Object(s.b)("inlineCode",{parentName:"strong"},"call"),"、",Object(s.b)("inlineCode",{parentName:"strong"},"apply")," 或 ",Object(s.b)("inlineCode",{parentName:"strong"},"bind"),"来改变指向。"))),Object(s.b)("div",{parentName:"li",className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," obj ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function-variable function"},"a"),Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=>")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\nobj",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"a"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// window"),"\nobj",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"a"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"bind"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// window"))))),Object(s.b)("li",{parentName:"ul",className:"__internal"},Object(s.b)("p",{parentName:"li"},Object(s.b)("strong",{parentName:"p"},"示例")),Object(s.b)("div",{parentName:"li",className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"var")," a ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"1"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"var")," obj ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  a",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"2"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},","),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"var")," bar\n\nobj",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"foo ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," foo\nbar ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," obj",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"foo\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"foo"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"var")," a ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"3"),"\n  console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"a",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token function"},"foo"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 1. 1"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"a"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token string"},'"use strict"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function"},"foo"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 2. 1"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function"},"bar"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"bind"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"a",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"call"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"obj",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 3. 1"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n\nobj",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"foo"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 4.   2"),"\nobj",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"foo"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"call"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 5. 1"),"\n",Object(s.b)("span",{parentName:"code",className:"token function"},"bar"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 6.    1"),"\n",Object(s.b)("span",{parentName:"code",className:"token function"},"bar"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"apply"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"obj",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 7. 2"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"var")," b ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"foo"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 8. undefined"),"\nconsole",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"b",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"a",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),"  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 9. undefined")))))),Object(s.b)("h2",{className:"__internal",id:"6简单的实现双向绑定"},"6.简单的实现双向绑定",Object(s.b)("a",{parentName:"h2",href:"#6%E7%AE%80%E5%8D%95%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8F%8C%E5%90%91%E7%BB%91%E5%AE%9A","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("h3",{className:"__internal",id:"61-利用defineproperty"},"6.1 利用defineProperty",Object(s.b)("a",{parentName:"h3",href:"#61-%E5%88%A9%E7%94%A8defineproperty","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token comment"},"// 数据"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," data ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  text",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"default"'),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," input ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," document",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"getElementById"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"input"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," span ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," document",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"getElementById"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"span"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 数据劫持"),"\nObject",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"defineProperty"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"data",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"text"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 数据变化 --\x3e 修改视图"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function"},"set"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"newVal",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    input",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"value ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," newVal",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    span",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"innerHTML ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," newVal",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 视图更改 --\x3e 数据变化"),"\ninput",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"addEventListener"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"keyup"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"e"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  data",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"text ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," e",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"target",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"value",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n"))),Object(s.b)("h3",{className:"__internal",id:"62-利用proxy"},"6.2 利用proxy",Object(s.b)("a",{parentName:"h3",href:"#62-%E5%88%A9%E7%94%A8proxy","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token comment"},"// 数据"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," data ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  text",Object(s.b)("span",{parentName:"code",className:"token operator"},":")," ",Object(s.b)("span",{parentName:"code",className:"token string"},'"default"'),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," input ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," document",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"getElementById"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"input"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," span ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," document",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"getElementById"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"span"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 数据劫持"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," handler ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token function"},"set"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"target",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," key",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," value",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    target",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"["),"key",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"]")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," value",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 数据变化 --\x3e 修改视图"),"\n    input",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"value ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," value",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    span",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"innerHTML ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," value",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"return")," value",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"const")," proxy ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(s.b)("span",{parentName:"code",className:"token class-name"},"Proxy"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"data",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," handler",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 视图更改 --\x3e 数据变化"),"\ninput",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"addEventListener"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"keyup"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"e"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  proxy",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"text ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," e",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"target",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"value",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n"))),Object(s.b)("h2",{className:"__internal",id:"7防抖与节流"},"7.防抖与节流",Object(s.b)("a",{parentName:"h2",href:"#7%E9%98%B2%E6%8A%96%E4%B8%8E%E8%8A%82%E6%B5%81","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("h3",{className:"__internal",id:"71-防抖"},"7.1 防抖",Object(s.b)("a",{parentName:"h3",href:"#71-%E9%98%B2%E6%8A%96","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"防抖函数 onscroll 结束时触发一次，延迟执行")),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"debounce"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"func",Object(s.b)("span",{parentName:"span",className:"token punctuation"},",")," wait"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," timeout",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"return")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," context ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," args ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," arguments",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"if")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"timeout",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"clearTimeout"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"timeout",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    timeout ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"setTimeout"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=>")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n      ",Object(s.b)("span",{parentName:"code",className:"token function"},"func"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"apply"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"context",Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," args",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," wait",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 使用"),"\nwindow",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"onscroll ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"debounce"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"function"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"debounce"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"1000"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")))),Object(s.b)("h3",{className:"__internal",id:"72节流"},"7.2节流",Object(s.b)("a",{parentName:"h3",href:"#72%E8%8A%82%E6%B5%81","aria-hidden":!0,className:"anchor"},"#")),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"节流函数 onscroll 时，每隔一段时间触发一次，像水滴一样")),Object(s.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(s.b)("pre",{parentName:"div",className:"language-js"},Object(s.b)("code",{parentName:"pre",className:"language-js"},Object(s.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"throttle"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token parameter"},"fn",Object(s.b)("span",{parentName:"span",className:"token punctuation"},",")," delay"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," prevTime ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," Date",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"now"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"return")," ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"function"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," curTime ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," Date",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"now"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token keyword"},"if")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),"curTime ",Object(s.b)("span",{parentName:"code",className:"token operator"},"-")," prevTime ",Object(s.b)("span",{parentName:"code",className:"token operator"},">")," delay",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n      ",Object(s.b)("span",{parentName:"code",className:"token function"},"fn"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"apply"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," arguments",Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n      prevTime ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," curTime",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n  ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(s.b)("span",{parentName:"code",className:"token comment"},"// 使用"),"\n",Object(s.b)("span",{parentName:"code",className:"token keyword"},"let")," throtteScroll ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(s.b)("span",{parentName:"code",className:"token function"},"throttle"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token keyword"},"function"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  console",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(s.b)("span",{parentName:"code",className:"token function"},"log"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(s.b)("span",{parentName:"code",className:"token string"},'"throtte"'),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(s.b)("span",{parentName:"code",className:"token number"},"1000"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(s.b)("span",{parentName:"code",className:"token punctuation"},";"),"\nwindow",Object(s.b)("span",{parentName:"code",className:"token punctuation"},"."),"onscroll ",Object(s.b)("span",{parentName:"code",className:"token operator"},"=")," throtteScroll",Object(s.b)("span",{parentName:"code",className:"token punctuation"},";")))))}j.isMDXComponent=!0,j=Object(c.hot)(e)(j),(m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(m.register(r,"makeShortcode","E:\\h-project\\my-blog\\docs\\notes\\15.md"),m.register(l,"Footer","E:\\h-project\\my-blog\\docs\\notes\\15.md"),m.register(u,"ImageWrap","E:\\h-project\\my-blog\\docs\\notes\\15.md"),m.register(d,"layoutProps","E:\\h-project\\my-blog\\docs\\notes\\15.md"),m.register("wrapper","MDXLayout","E:\\h-project\\my-blog\\docs\\notes\\15.md"),m.register(j,"MDXContent","E:\\h-project\\my-blog\\docs\\notes\\15.md")),(N="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&N(e)}.call(this,n(4)(e))}}]);