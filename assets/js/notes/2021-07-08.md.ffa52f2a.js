(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{358:function(e,a,t){"use strict";t.r(a),function(e){t.d(a,"default",(function(){return d}));var n,c=t(122),o=(t(331),t(0),t(123)),s=["components"];function b(){return(b=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function p(e,a){if(null==e)return{};var t,n,c=function(e,a){if(null==e)return{};var t,n,c={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||(c[t]=e[t]);return c}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(c[t]=e[t])}return c}(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var r,m,N=function(e){return function(a){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),Object(o.b)("div",a)}},l=N("Footer"),j=N("ImageWrap"),u={};function d(e){var a=e.components,t=p(e,s);return Object(o.b)("wrapper",b({},u,t,{components:a,mdxType:"MDXLayout"}),Object(o.b)("blockquote",null,Object(o.b)(l,{mdxType:"Footer"})),Object(o.b)("h1",{className:"__internal",id:"15能动手别bb"},"15.能动手别BB",Object(o.b)("a",{parentName:"h1",href:"#15%E8%83%BD%E5%8A%A8%E6%89%8B%E5%88%ABbb","aria-hidden":!0,className:"anchor"},"#")),Object(o.b)("h2",{className:"__internal",id:"1实现new"},"1.实现new",Object(o.b)("a",{parentName:"h2",href:"#1%E5%AE%9E%E7%8E%B0new","aria-hidden":!0,className:"anchor"},"#")),Object(o.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(o.b)("pre",{parentName:"div",className:"language-js"},Object(o.b)("code",{parentName:"pre",className:"language-js"},"\n",Object(o.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(o.b)("span",{parentName:"code",className:"token function"},"Parent")," ",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token parameter"},"name",Object(o.b)("span",{parentName:"span",className:"token punctuation"},","),"age"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n  ",Object(o.b)("span",{parentName:"code",className:"token comment"},"//1.创建一个新对象，赋予this，这一步是隐性的，等同于let this = {}"),"\n  ",Object(o.b)("span",{parentName:"code",className:"token comment"},"//2.给this指向的对象赋予构造属性"),"\n  ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),"name ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," name",Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),"age ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," age",Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(o.b)("span",{parentName:"code",className:"token comment"},"//3.如果没有手动返回对象，则默认返回this指向的这个对象，也是隐性的 这里的return this是非必须的"),"\n  ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"return")," ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(o.b)("span",{parentName:"code",className:"token keyword"},"const")," child ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(o.b)("span",{parentName:"code",className:"token class-name"},"Parent"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";")))),Object(o.b)("p",null,"在《JavaScript模式》这本书中，new的过程说的比较直白，当我们new一个构造器，主要有三步："),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"• 创建一个",Object(o.b)("strong",{parentName:"p"},"空对象"),"，将它的引用赋给 this，继承函数的原型。"),Object(o.b)("p",{parentName:"blockquote"},"• 通过 this 将",Object(o.b)("strong",{parentName:"p"},"属性"),"和",Object(o.b)("strong",{parentName:"p"},"方法"),"添加至这个对象"),Object(o.b)("p",{parentName:"blockquote"},"• 最后返回 this 指向的",Object(o.b)("strong",{parentName:"p"},"新对象"),"，也就是实例")),Object(o.b)("p",null,"那如何来实现呢?"),Object(o.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(o.b)("pre",{parentName:"div",className:"language-js"},Object(o.b)("code",{parentName:"pre",className:"language-js"},Object(o.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(o.b)("span",{parentName:"code",className:"token function"},"myNew"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// 创建一个空对象"),"\n    ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"let")," obj ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(o.b)("span",{parentName:"code",className:"token class-name"},"Object"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// (1)"),"\n\n    ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// 处理构建函数 将构造函数的作用域赋给新对象"),"\n    ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// 就是给这个新对象构造原型链，链接到构造函数的原型对象上，从而新对象就可以访问构造函数中的属性和方法"),"\n    ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// 构造函数就是我们传入的第一个参数。由于arguments是类数组，我们不能直接使用shift方法，我们可以使用call来调用Array上的shift方法"),"\n    ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"let")," constructor ",Object(o.b)("span",{parentName:"code",className:"token operator"},"="),"  ",Object(o.b)("span",{parentName:"code",className:"token class-name"},"Array"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(o.b)("span",{parentName:"code",className:"token function"},"shift"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(o.b)("span",{parentName:"code",className:"token function"},"call"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),"arguments",Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),Object(o.b)("span",{parentName:"code",className:"token comment"},"//(2)"),"\n\n    ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// 我们把obj的原型指向构造函数的原型对象上"),"\n    obj",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),"__proto__ ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," constructor",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype",Object(o.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// (3)"),"\n   ",Object(o.b)("span",{parentName:"code",className:"token comment"},"/*********/"),"\n   ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// let obj = new Object()来说，执行的时候obj.__proto__是指向Object.prototype的原型。"),"\n   ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// 如果使用 Object.create(object, objectProps)这种方法，第一个参数就是要创建的对象的原型，如果赋值为null，"),"\n   ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// 则得到的obj没有任何原型；如果我们想要新对象使用构造函数的原型，那么只需要"),"\n    ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"let")," myNewObj ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," Object",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(o.b)("span",{parentName:"code",className:"token function"},"create"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),"constructor",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype",Object(o.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// 等价于 （1）（3）"),"\n   ",Object(o.b)("span",{parentName:"code",className:"token comment"},"/*********/"),"\n\n    ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// 最后我们为这个新的对象添加属性与方法 执行一下就可以了。"),"\n    ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"let")," newObj ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(o.b)("span",{parentName:"code",className:"token function"},"constructor"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(o.b)("span",{parentName:"code",className:"token function"},"apply"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),"obj",Object(o.b)("span",{parentName:"code",className:"token punctuation"},",")," arguments",Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),Object(o.b)("span",{parentName:"code",className:"token comment"},"// (4)"),"\n\n    ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// 如果构造函数有返回值，则返回值，没有就返回这个新的对象 ，这里还需要考虑构造函数显示返回 null 的情况"),"\n    ",Object(o.b)("span",{parentName:"code",className:"token comment"},'// return typeof newObj === "object" ? newObj || obj : obj; // (5)'),"\n    ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"return"),"  newObj ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"instanceof"),"  ",Object(o.b)("span",{parentName:"code",className:"token class-name"},"Object")," ",Object(o.b)("span",{parentName:"code",className:"token operator"},"?")," newObj ",Object(o.b)("span",{parentName:"code",className:"token operator"},"||")," obj ",Object(o.b)("span",{parentName:"code",className:"token operator"},":")," obj",Object(o.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// (5)"),"\n",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",Object(o.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(o.b)("span",{parentName:"code",className:"token function"},"person"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token parameter"},"name",Object(o.b)("span",{parentName:"span",className:"token punctuation"},",")," age"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),"name ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," name\n    ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"this"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),"age ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," age\n",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(o.b)("span",{parentName:"code",className:"token keyword"},"let")," p ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(o.b)("span",{parentName:"code",className:"token function"},"myNew"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),"person",Object(o.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(o.b)("span",{parentName:"code",className:"token string"},'"测试"'),Object(o.b)("span",{parentName:"code",className:"token punctuation"},",")," ",Object(o.b)("span",{parentName:"code",className:"token number"},"12"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),"\nconsole",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(o.b)("span",{parentName:"code",className:"token function"},"log"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),"p",Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),"  ",Object(o.b)("span",{parentName:"code",className:"token comment"},'// { name: "测试", age: 12 }'),"\n\n"))),Object(o.b)("h2",{className:"__internal",id:"2实现instanceof"},"2.实现instanceof",Object(o.b)("a",{parentName:"h2",href:"#2%E5%AE%9E%E7%8E%B0instanceof","aria-hidden":!0,className:"anchor"},"#")),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"在上面的实现的new的过程中，我们在最后判断构造函数的是返回值时用到了instanceof做为我们的类型判断")),Object(o.b)("hr",null),Object(o.b)("p",null,"补充一下，关于我们类型判断有下面几种方式"),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"tips: 这里不重要")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul",className:"__internal"},"typeof"),Object(o.b)("li",{parentName:"ul",className:"__internal"},"Object.prototype.toString"),Object(o.b)("li",{parentName:"ul",className:"__internal"},"instanceof"),Object(o.b)("li",{parentName:"ul",className:"__internal"},"constructor"),Object(o.b)("li",{parentName:"ul",className:"__internal"},"$.type")),Object(o.b)("h3",{className:"__internal",id:"21-typeof用于类型判断"},"2.1 typeof用于类型判断",Object(o.b)("a",{parentName:"h3",href:"#21-typeof%E7%94%A8%E4%BA%8E%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD","aria-hidden":!0,className:"anchor"},"#")),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",{parentName:"tr",align:null},"判断"),Object(o.b)("th",{parentName:"tr",align:"center"},"结果"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"typeof 3 （整数，小数，",Object(o.b)("a",{parentName:"td",href:"http://www.w3school.com.cn/jsref/jsref_ln2.asp",target:"_blank"},"自然对数Math.LN2"),"，",Object(o.b)("a",{parentName:"td",href:"http://www.w3school.com.cn/jsref/jsref_infinity.asp",target:"_blank"},"正无穷大数Infinity"),"）"),Object(o.b)("td",{parentName:"tr",align:"center"},'"number"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"typeof NaN"),Object(o.b)("td",{parentName:"tr",align:"center"},'"number"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"typeof (function(){})"),Object(o.b)("td",{parentName:"tr",align:"center"},'"function"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},'typeof Math.sin === "function"'),Object(o.b)("td",{parentName:"tr",align:"center"},'"function"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"typeof undefined"),Object(o.b)("td",{parentName:"tr",align:"center"},'"undefined"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},'typeof "3"'),Object(o.b)("td",{parentName:"tr",align:"center"},'"string"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},'typeof ""'),Object(o.b)("td",{parentName:"tr",align:"center"},'"string"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"typeof true"),Object(o.b)("td",{parentName:"tr",align:"center"},'"boolean"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"typeof false"),Object(o.b)("td",{parentName:"tr",align:"center"},'"boolean"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"typeof Symbol()"),Object(o.b)("td",{parentName:"tr",align:"center"},'"symbol"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"typeof Symbol.iterator"),Object(o.b)("td",{parentName:"tr",align:"center"},'"symbol"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"typeof null"),Object(o.b)("td",{parentName:"tr",align:"center"},'"object"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"typeof {}"),Object(o.b)("td",{parentName:"tr",align:"center"},'"object"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"typeof new Date()"),Object(o.b)("td",{parentName:"tr",align:"center"},'"object"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"typeof []"),Object(o.b)("td",{parentName:"tr",align:"center"},'"object"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"typeof /\\d/（正则）"),Object(o.b)("td",{parentName:"tr",align:"center"},'"object"')))),Object(o.b)("h3",{className:"__internal",id:"22-objectprototypetostring推荐"},"2.2 Object.prototype.toString(推荐)",Object(o.b)("a",{parentName:"h3",href:"#22-objectprototypetostring%E6%8E%A8%E8%8D%90","aria-hidden":!0,className:"anchor"},"#")),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"原生原型扩展函数，用来精确的区分数据类型，")),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",{parentName:"tr",align:null},"判断"),Object(o.b)("th",{parentName:"tr",align:"center"},"结果"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"Object.prototype.toString.call(3)"),Object(o.b)("td",{parentName:"tr",align:"center"},'"',"[object Number]",'"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"Object.prototype.toString.call(NaN)"),Object(o.b)("td",{parentName:"tr",align:"center"},'"',"[object Number]",'"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"Object.prototype.toString.call((function(){}))"),Object(o.b)("td",{parentName:"tr",align:"center"},'"',"[object Function]",'"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"Object.prototype.toString.call(undefined)"),Object(o.b)("td",{parentName:"tr",align:"center"},'"',"[object Undefined]",'"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"Object.prototype.toString.call(null)"),Object(o.b)("td",{parentName:"tr",align:"center"},'"',"[object Null]",'"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},'Object.prototype.toString.call("3")'),Object(o.b)("td",{parentName:"tr",align:"center"},'"',"[object String]",'"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"Object.prototype.toString.call(true)"),Object(o.b)("td",{parentName:"tr",align:"center"},'"',"[object Boolean]",'"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"Object.prototype.toString.call(Symbol())"),Object(o.b)("td",{parentName:"tr",align:"center"},'"',"[object Symbol]",'"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"Object.prototype.toString.call({})"),Object(o.b)("td",{parentName:"tr",align:"center"},'"',"[object Object]",'"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"Object.prototype.toString.call([])"),Object(o.b)("td",{parentName:"tr",align:"center"},'"',"[object Array]",'"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"Object.prototype.toString.call(new Date())"),Object(o.b)("td",{parentName:"tr",align:"center"},'"',"[object Date]",'"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"Object.prototype.toString.call(/\\d/)"),Object(o.b)("td",{parentName:"tr",align:"center"},'"',"[object RegExp]",'"')))),Object(o.b)("h3",{className:"__internal",id:"23-instanceof"},"2.3 instanceof",Object(o.b)("a",{parentName:"h3",href:"#23-instanceof","aria-hidden":!0,className:"anchor"},"#")),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"主要判断构造函数的prototype是不是在对象原型链中，用于检测引用类型的判断方法，针对Array和RegExp进行判断。")),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",{parentName:"tr",align:null},"判断"),Object(o.b)("th",{parentName:"tr",align:"center"},"结果"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"[] instanceof Array"),Object(o.b)("td",{parentName:"tr",align:"center"},"true")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"/","\\","d/ instanceof RegExp"),Object(o.b)("td",{parentName:"tr",align:"center"},"true")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"'' instanceof String"),Object(o.b)("td",{parentName:"tr",align:"center"},"false")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"String instanceof String"),Object(o.b)("td",{parentName:"tr",align:"center"},"false")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"1 instanceof Number"),Object(o.b)("td",{parentName:"tr",align:"center"},"false")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"Number instanceof Number"),Object(o.b)("td",{parentName:"tr",align:"center"},"false")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"true instanceof Boolean"),Object(o.b)("td",{parentName:"tr",align:"center"},"false")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"null instanceof Object"),Object(o.b)("td",{parentName:"tr",align:"center"},"false")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"{} instanceof Object（{}和function(){}都为Object，没法区分对象和方法"),Object(o.b)("td",{parentName:"tr",align:"center"},"true")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"function(){} instanceof Object（方法既是Object又是Function"),Object(o.b)("td",{parentName:"tr",align:"center"},"true")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"function(){} instanceof Function"),Object(o.b)("td",{parentName:"tr",align:"center"},"true")))),Object(o.b)("h3",{className:"__internal",id:"24-constructor"},"2.4 constructor",Object(o.b)("a",{parentName:"h3",href:"#24-constructor","aria-hidden":!0,className:"anchor"},"#")),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"返回对创建此对象的函数的引用，每个具有原型的对象都会自动获得constructor属性")),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",{parentName:"tr",align:null},"判断"),Object(o.b)("th",{parentName:"tr",align:"center"},"结果"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"new Number(3).constructor === Number"),Object(o.b)("td",{parentName:"tr",align:"center"},"true")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"new Function().constructor === Function"),Object(o.b)("td",{parentName:"tr",align:"center"},"true")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"''.constructor === String"),Object(o.b)("td",{parentName:"tr",align:"center"},"true")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"new Boolean().constructor === Boolean"),Object(o.b)("td",{parentName:"tr",align:"center"},"true")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"new Object().constructor === Object"),Object(o.b)("td",{parentName:"tr",align:"center"},"true")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"new Date().constructor === Date"),Object(o.b)("td",{parentName:"tr",align:"center"},"true")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"[].constructor === Array"),Object(o.b)("td",{parentName:"tr",align:"center"},"true")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"new Error().constructor === Error"),Object(o.b)("td",{parentName:"tr",align:"center"},"true")))),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"注意 关于类的继承有个坑")),Object(o.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(o.b)("pre",{parentName:"div",className:"language-js"},Object(o.b)("code",{parentName:"pre",className:"language-js"}," ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(o.b)("span",{parentName:"code",className:"token constant"},"A"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(o.b)("span",{parentName:"code",className:"token constant"},"B"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n ",Object(o.b)("span",{parentName:"code",className:"token comment"},"//A继承自B"),"\n ",Object(o.b)("span",{parentName:"code",className:"token class-name"},"A"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(o.b)("span",{parentName:"code",className:"token class-name"},"B"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n ",Object(o.b)("span",{parentName:"code",className:"token comment"},"//创建A对象的实例"),"\n ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"let")," AObject ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(o.b)("span",{parentName:"code",className:"token class-name"},"A"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(o.b)("span",{parentName:"code",className:"token comment"},"// 注意开车了"),"\n console",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(o.b)("span",{parentName:"code",className:"token function"},"log"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token class-name"},"AObject"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),"constructor ",Object(o.b)("span",{parentName:"code",className:"token operator"},"===")," ",Object(o.b)("span",{parentName:"code",className:"token constant"},"B"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(o.b)("span",{parentName:"code",className:"token comment"},"//true;"),"\n console",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(o.b)("span",{parentName:"code",className:"token function"},"log"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token class-name"},"AObject"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),"constructor ",Object(o.b)("span",{parentName:"code",className:"token operator"},"===")," ",Object(o.b)("span",{parentName:"code",className:"token constant"},"A"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(o.b)("span",{parentName:"code",className:"token comment"},"//false;"),"\n\n",Object(o.b)("span",{parentName:"code",className:"token comment"},"//instanceof方法中对象直接继承和间接继承的都会报true"),"\n console",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(o.b)("span",{parentName:"code",className:"token function"},"log"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),"AObject ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"instanceof")," ",Object(o.b)("span",{parentName:"code",className:"token class-name"},"B"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(o.b)("span",{parentName:"code",className:"token comment"},"//true;"),"\n\n console",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(o.b)("span",{parentName:"code",className:"token function"},"log"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),"AObject ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"instanceof")," ",Object(o.b)("span",{parentName:"code",className:"token class-name"},"A"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// true;"),"\n\n ",Object(o.b)("span",{parentName:"code",className:"token comment"},"//解决construtor的问题通常是让对象的constructor手动指向自己"),"\n ",Object(o.b)("span",{parentName:"code",className:"token comment"},"//将自己的类赋值给对象的constructor属性"),"\n ",Object(o.b)("span",{parentName:"code",className:"token class-name"},"AObject"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),"constructor ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(o.b)("span",{parentName:"code",className:"token constant"},"A"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n console",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(o.b)("span",{parentName:"code",className:"token function"},"log"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token class-name"},"AObject"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),"constructor ",Object(o.b)("span",{parentName:"code",className:"token operator"},"===")," ",Object(o.b)("span",{parentName:"code",className:"token constant"},"A"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// true;"),"\n console",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(o.b)("span",{parentName:"code",className:"token function"},"log"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token class-name"},"AObject"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),"constructor ",Object(o.b)("span",{parentName:"code",className:"token operator"},"===")," ",Object(o.b)("span",{parentName:"code",className:"token constant"},"B"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// false;基类不会报true了;")))),Object(o.b)("h3",{className:"__internal",id:"25-type知道就行了不重要"},"2.5 $.type(知道就行了,不重要)",Object(o.b)("a",{parentName:"h3",href:"#25-type%E7%9F%A5%E9%81%93%E5%B0%B1%E8%A1%8C%E4%BA%86%E4%B8%8D%E9%87%8D%E8%A6%81","aria-hidden":!0,className:"anchor"},"#")),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"JQ提供的一个类型判断方法")),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",{parentName:"tr",align:null},"判断"),Object(o.b)("th",{parentName:"tr",align:"center"},"结果"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"$.type(3)"),Object(o.b)("td",{parentName:"tr",align:"center"},'"number"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"$.type(NaN)"),Object(o.b)("td",{parentName:"tr",align:"center"},'"number"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"$.type((function(){}))"),Object(o.b)("td",{parentName:"tr",align:"center"},'"function"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"$.type(undefined)"),Object(o.b)("td",{parentName:"tr",align:"center"},'"undefined"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"$.type('3')"),Object(o.b)("td",{parentName:"tr",align:"center"},'"string"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"$.type(true)"),Object(o.b)("td",{parentName:"tr",align:"center"},'"boolean"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"$.type(Symbol())"),Object(o.b)("td",{parentName:"tr",align:"center"},'"Symbol()"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"$.type({})"),Object(o.b)("td",{parentName:"tr",align:"center"},'"object"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"$.type(new Date())"),Object(o.b)("td",{parentName:"tr",align:"center"},'"date"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"$.type([])"),Object(o.b)("td",{parentName:"tr",align:"center"},'"array"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"$.type(null)"),Object(o.b)("td",{parentName:"tr",align:"center"},'"null"')),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"$.type(/\\d/)"),Object(o.b)("td",{parentName:"tr",align:"center"},'"regexp"')))),Object(o.b)("hr",null),Object(o.b)("h3",{className:"__internal",id:"26-如何实现instanceof"},"2.6 如何实现instanceof",Object(o.b)("a",{parentName:"h3",href:"#26-%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0instanceof","aria-hidden":!0,className:"anchor"},"#")),Object(o.b)("blockquote",null,Object(o.b)(j,{title:"原型链",src:"/images/my-prototype.png",mdxType:"ImageWrap"})),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"}," instanceof 是通过原型链判断的，A instanceof B, 在A的原型链中层层查找，是否有原型等于B.prototype，如果一直找到A的原型链的顶端null,仍然不等于B.prototype，那么返回false，否则返回true.")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul",className:"__internal"},"直接通过原型链的判断方法进行实现")),Object(o.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(o.b)("pre",{parentName:"div",className:"language-js"},Object(o.b)("code",{parentName:"pre",className:"language-js"},Object(o.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(o.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token parameter"},Object(o.b)("span",{parentName:"span",className:"token constant"},"L"),Object(o.b)("span",{parentName:"span",className:"token punctuation"},","),Object(o.b)("span",{parentName:"span",className:"token constant"},"R")),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"{")," ",Object(o.b)("span",{parentName:"code",className:"token comment"},"//L 表示左表达式，R 表示右表达式"),"\n      ",Object(o.b)("span",{parentName:"code",className:"token constant"},"L")," ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(o.b)("span",{parentName:"code",className:"token constant"},"L"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),"__proto__",Object(o.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// 等价于 Object.getPrototypeOf(L)"),"\n      ",Object(o.b)("span",{parentName:"code",className:"token constant"},"R")," ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(o.b)("span",{parentName:"code",className:"token class-name"},"R"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype",Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n      ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"while"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token boolean"},"true"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n           ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"if"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token constant"},"L")," ",Object(o.b)("span",{parentName:"code",className:"token operator"},"==")," ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"null"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n                ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"return")," ",Object(o.b)("span",{parentName:"code",className:"token boolean"},"false"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n           ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"if"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token constant"},"L")," ",Object(o.b)("span",{parentName:"code",className:"token operator"},"===")," ",Object(o.b)("span",{parentName:"code",className:"token constant"},"R"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n                ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"return")," ",Object(o.b)("span",{parentName:"code",className:"token boolean"},"true"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n           ",Object(o.b)("span",{parentName:"code",className:"token constant"},"L")," ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(o.b)("span",{parentName:"code",className:"token constant"},"L"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),"__proto__",Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n      ",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n",Object(o.b)("span",{parentName:"code",className:"token keyword"},"let")," a ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"]"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(o.b)("span",{parentName:"code",className:"token keyword"},"let")," b ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"}"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\n",Object(o.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(o.b)("span",{parentName:"code",className:"token function"},"Foo"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(o.b)("span",{parentName:"code",className:"token keyword"},"let")," f ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(o.b)("span",{parentName:"code",className:"token class-name"},"Foo"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n",Object(o.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(o.b)("span",{parentName:"code",className:"token function"},"child"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(o.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(o.b)("span",{parentName:"code",className:"token function"},"father"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\nchild",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(o.b)("span",{parentName:"code",className:"token class-name"},"father"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n",Object(o.b)("span",{parentName:"code",className:"token keyword"},"let")," d ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(o.b)("span",{parentName:"code",className:"token class-name"},"child"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n\nconsole",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(o.b)("span",{parentName:"code",className:"token function"},"log"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),"a",Object(o.b)("span",{parentName:"code",className:"token punctuation"},",")," Array",Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// true"),"\nconsole",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(o.b)("span",{parentName:"code",className:"token function"},"log"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),"b",Object(o.b)("span",{parentName:"code",className:"token punctuation"},",")," Object",Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// true"),"\nconsole",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(o.b)("span",{parentName:"code",className:"token function"},"log"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),"b",Object(o.b)("span",{parentName:"code",className:"token punctuation"},",")," Array",Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// false"),"\nconsole",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(o.b)("span",{parentName:"code",className:"token function"},"log"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),"a",Object(o.b)("span",{parentName:"code",className:"token punctuation"},",")," Object",Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// true"),"\nconsole",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(o.b)("span",{parentName:"code",className:"token function"},"log"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),"f",Object(o.b)("span",{parentName:"code",className:"token punctuation"},",")," Foo",Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),Object(o.b)("span",{parentName:"code",className:"token comment"},"// true"),"\nconsole",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(o.b)("span",{parentName:"code",className:"token function"},"log"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),"Foo",Object(o.b)("span",{parentName:"code",className:"token punctuation"},",")," Foo",Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// false ????"),"\nconsole",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(o.b)("span",{parentName:"code",className:"token function"},"log"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),"d",Object(o.b)("span",{parentName:"code",className:"token punctuation"},",")," child",Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// true"),"\nconsole",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(o.b)("span",{parentName:"code",className:"token function"},"log"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),"d",Object(o.b)("span",{parentName:"code",className:"token punctuation"},",")," father",Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";")," ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// true"),"\n"))),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul",className:"__internal"},"通过constructor来实现,但是如果对于",Object(o.b)("strong",{parentName:"li"},"继承"),"的就",Object(o.b)("strong",{parentName:"li"},"无法判断"),"了")),Object(o.b)("div",{className:"rcpress-highlight","data-language":"js"},Object(o.b)("pre",{parentName:"div",className:"language-js"},Object(o.b)("code",{parentName:"pre",className:"language-js"},Object(o.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(o.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token parameter"},Object(o.b)("span",{parentName:"span",className:"token constant"},"L"),Object(o.b)("span",{parentName:"span",className:"token punctuation"},",")," ",Object(o.b)("span",{parentName:"span",className:"token constant"},"R")),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(o.b)("span",{parentName:"code",className:"token comment"},"//L 表示左表达式，R 表示右表达式"),"\n  ",Object(o.b)("span",{parentName:"code",className:"token constant"},"L")," ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(o.b)("span",{parentName:"code",className:"token constant"},"L"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),"__proto__",Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"while")," ",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token boolean"},"true"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"{"),"\n    ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"if")," ",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token constant"},"L")," ",Object(o.b)("span",{parentName:"code",className:"token operator"},"===")," ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"null"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n      ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"return")," ",Object(o.b)("span",{parentName:"code",className:"token boolean"},"false"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"if")," ",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token constant"},"R")," ",Object(o.b)("span",{parentName:"code",className:"token operator"},"===")," ",Object(o.b)("span",{parentName:"code",className:"token class-name"},"L"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),"constructor",Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n      ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"return")," ",Object(o.b)("span",{parentName:"code",className:"token boolean"},"true"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n    ",Object(o.b)("span",{parentName:"code",className:"token constant"},"L")," ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(o.b)("span",{parentName:"code",className:"token constant"},"L"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),"__proto__",Object(o.b)("span",{parentName:"code",className:"token punctuation"},";"),"\n  ",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(o.b)("span",{parentName:"code",className:"token comment"},"// 开始测试"),"\n",Object(o.b)("span",{parentName:"code",className:"token keyword"},"let")," a ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"["),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"]"),"\n",Object(o.b)("span",{parentName:"code",className:"token keyword"},"let")," b ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n\n",Object(o.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(o.b)("span",{parentName:"code",className:"token function"},"Foo"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(o.b)("span",{parentName:"code",className:"token keyword"},"let")," f ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(o.b)("span",{parentName:"code",className:"token class-name"},"Foo"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n\n",Object(o.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(o.b)("span",{parentName:"code",className:"token function"},"child"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\n",Object(o.b)("span",{parentName:"code",className:"token keyword"},"function")," ",Object(o.b)("span",{parentName:"code",className:"token function"},"father"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"{"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"}"),"\nchild",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),"prototype ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(o.b)("span",{parentName:"code",className:"token class-name"},"father"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n",Object(o.b)("span",{parentName:"code",className:"token keyword"},"let")," c ",Object(o.b)("span",{parentName:"code",className:"token operator"},"=")," ",Object(o.b)("span",{parentName:"code",className:"token keyword"},"new")," ",Object(o.b)("span",{parentName:"code",className:"token class-name"},"child"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),"\n\nconsole",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(o.b)("span",{parentName:"code",className:"token function"},"log"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),"a",Object(o.b)("span",{parentName:"code",className:"token punctuation"},",")," Array",Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// true"),"\nconsole",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(o.b)("span",{parentName:"code",className:"token function"},"log"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),"b",Object(o.b)("span",{parentName:"code",className:"token punctuation"},",")," Object",Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// true"),"\nconsole",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(o.b)("span",{parentName:"code",className:"token function"},"log"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),"b",Object(o.b)("span",{parentName:"code",className:"token punctuation"},",")," Array",Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// false"),"\nconsole",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(o.b)("span",{parentName:"code",className:"token function"},"log"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),"a",Object(o.b)("span",{parentName:"code",className:"token punctuation"},",")," Object",Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// true"),"\nconsole",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(o.b)("span",{parentName:"code",className:"token function"},"log"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),"f",Object(o.b)("span",{parentName:"code",className:"token punctuation"},",")," Foo",Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// true"),"\nconsole",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(o.b)("span",{parentName:"code",className:"token function"},"log"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),"c",Object(o.b)("span",{parentName:"code",className:"token punctuation"},",")," child",Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// false 这里就是无法用于判断继承的"),"\nconsole",Object(o.b)("span",{parentName:"code",className:"token punctuation"},"."),Object(o.b)("span",{parentName:"code",className:"token function"},"log"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),Object(o.b)("span",{parentName:"code",className:"token function"},"myInstanceof"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},"("),"c",Object(o.b)("span",{parentName:"code",className:"token punctuation"},",")," father",Object(o.b)("span",{parentName:"code",className:"token punctuation"},")"),Object(o.b)("span",{parentName:"code",className:"token punctuation"},")")," ",Object(o.b)("span",{parentName:"code",className:"token comment"},"// true")))))}d.isMDXComponent=!0,d=Object(c.hot)(e)(d),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(r.register(N,"makeShortcode","E:\\h-project\\my-blog\\docs\\notes\\2021-07-08.md"),r.register(l,"Footer","E:\\h-project\\my-blog\\docs\\notes\\2021-07-08.md"),r.register(j,"ImageWrap","E:\\h-project\\my-blog\\docs\\notes\\2021-07-08.md"),r.register(u,"layoutProps","E:\\h-project\\my-blog\\docs\\notes\\2021-07-08.md"),r.register("wrapper","MDXLayout","E:\\h-project\\my-blog\\docs\\notes\\2021-07-08.md"),r.register(d,"MDXContent","E:\\h-project\\my-blog\\docs\\notes\\2021-07-08.md")),(m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&m(e)}.call(this,t(3)(e))}}]);